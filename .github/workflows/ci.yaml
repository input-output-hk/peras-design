name: CI
on:
  pull_request:
  push:
    branches:
    - main

jobs:
  check:
    name: Typecheck Agda
    runs-on: ubuntu-latest # or macOS-latest, or windows-latest
    steps:
    - name: 📥 Checkout repository
      uses: actions/checkout@v4

    # Setup Agda 2.6.3 with recommended version of agda-stdlib and
    # uses standard-library as default
    - name: ❄ Setup Agda
      uses: wenkokke/setup-agda@v2
      with:
        agda-version: '2.6.3'
        agda-stdlib-version: 'recommended'
        agda-defaults: |
          standard-library
        agda-libraries: |
          https://github.com/agda/agda2hs.git#v1.2

    - name: ❓ Typecheck
      run: |
        make typecheck
