```agda
module Peras.SmallStep.Analysis where
```
<!--
```agda
import Relation.Binary.PropositionalEquality as Eq
open Eq using (_â‰¡_; _â‰¢_; refl)

open import Peras.Params
```
-->
## Protocol Analysis

### Voting strings

```agda
data Î£ : Set where
  â’ˆ : Î£
  ï¼Ÿ : Î£
  ðŸ„€ : Î£
```
```agda
module Vec â¦ƒ _ : Params â¦„ where
  open import Data.Vec renaming (_âˆ·Ê³_ to _,_)
  open import Data.Nat
  open import Data.Product using (_Ã—_)

  open Params â¦ƒ...â¦„

  VotingString = Vec Î£
  
  infix 3 _âŸ¶_
  
  data _âŸ¶_ : âˆ€ {n} â†’ VotingString n â†’ VotingString (suc n) â†’ Set where

    HS-I : [] âŸ¶ [] , â’ˆ

    HS-II-? : âˆ€ {n} {Ïƒ : VotingString n}
      â†’ Ïƒ , â’ˆ âŸ¶ Ïƒ , â’ˆ , ï¼Ÿ

    HS-II-1 : âˆ€ {n} {Ïƒ : VotingString n}
      â†’ Ïƒ , â’ˆ âŸ¶ Ïƒ , â’ˆ , â’ˆ

    HS-III : âˆ€ {n} {Ïƒ : VotingString n}
      â†’ Ïƒ , ï¼Ÿ âŸ¶ Ïƒ , ï¼Ÿ , ðŸ„€

    HS-IV : âˆ€ {n} {Ïƒ : VotingString n}
      â†’ 1 â‰¤ L
      â†’ L â‰¤ K
      â†’ ((Ïƒ , â’ˆ , ï¼Ÿ) ++ replicate L ðŸ„€) âŸ¶ 
        ((Ïƒ , â’ˆ , ï¼Ÿ) ++ replicate L ðŸ„€) , ðŸ„€
```
### Leader strings
```agda
  LeaderString = Vec (â„• Ã— â„•)
```

<!--
```agda
{-
module Rec where
  open import Data.Vec.Recursive
  open import Data.Product using (_Ã—_; _,_)

  data _âŸ¶_ : âˆ€ {n} â†’ Î£ ^ n â†’ Î£ ^ (suc n) â†’ Set where

    HS-I : [] âŸ¶ â’ˆ

    HS-II-? : âˆ€ {Ïƒ}
      â†’ (Ïƒ , â’ˆ) âŸ¶ (Ïƒ , â’ˆ , ï¼Ÿ)

    HS-II-1 : âˆ€ {Ïƒ}
      â†’ (Ïƒ , â’ˆ) âŸ¶ (Ïƒ , â’ˆ , â’ˆ)

    HS-III : âˆ€ {Ïƒ}
      â†’ (Ïƒ , ï¼Ÿ) âŸ¶ (Ïƒ , ï¼Ÿ , ðŸ„€)

    HS-IV : âˆ€ {Ïƒ n}
      â†’ (Ïƒ , â’ˆ , ï¼Ÿ , let xx = replicate n ðŸ„€ in {!!}) âŸ¶ (Ïƒ , â’ˆ , ï¼Ÿ , ðŸ„€ , ðŸ„€)

  HS-IV : Valid âŸ¨âŸ©

  HS-V : Valid âŸ¨âŸ©
  HS-VI : Valid âŸ¨âŸ©
  HS-VII : Valid âŸ¨âŸ©
-}
```

### Theorem 4.1. The voting string in any execution is valid.

```agda

-- Execution = LeaderString Ã— VotingString
-- Execution = âˆ€ {m n : Size}
--  â†’ m â‰¡ rnd n
--  â†’ (List m (â„• Ã— â„•)) Ã— (List n Î£)

{-
theorem-4-1 : âˆ€ {Ï‰ : LeaderString} {Ïƒ : VotingString}
  â†’  
  â†’ Valid Ïƒ
-}

```
-->
