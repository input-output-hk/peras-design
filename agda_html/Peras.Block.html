<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Peras.Block</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <link rel="stylesheet" href="Agda.css" />
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<pre class="Agda"><a id="9" class="Keyword">module</a> <a id="16" href="Peras.Block.html" class="Module">Peras.Block</a> <a id="28" class="Keyword">where</a>
</pre>
<!--
<pre class="Agda"><a id="52" class="Keyword">open</a> <a id="57" class="Keyword">import</a> <a id="64" href="Data.Bool.html" class="Module">Data.Bool</a> <a id="74" class="Keyword">using</a> <a id="80" class="Symbol">(</a><a id="81" href="Agda.Builtin.Bool.html#173" class="Datatype">Bool</a><a id="85" class="Symbol">;</a> <a id="87" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a><a id="91" class="Symbol">;</a> <a id="93" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a><a id="98" class="Symbol">)</a>
<a id="100" class="Keyword">open</a> <a id="105" class="Keyword">import</a> <a id="112" href="Data.List.html" class="Module">Data.List</a> <a id="122" class="Keyword">using</a> <a id="128" class="Symbol">(</a><a id="129" href="Agda.Builtin.List.html#147" class="Datatype">List</a><a id="133" class="Symbol">;</a> <a id="135" href="Data.List.Base.html#4742" class="Function">null</a><a id="139" class="Symbol">;</a> <a id="141" href="Data.List.Base.html#8635" class="Function">head</a><a id="145" class="Symbol">;</a> <a id="147" href="Data.List.Base.html#10878" class="Function">filter</a><a id="153" class="Symbol">)</a>
<a id="155" class="Keyword">open</a> <a id="160" class="Keyword">import</a> <a id="167" href="Data.List.Membership.Propositional.html" class="Module">Data.List.Membership.Propositional</a> <a id="202" class="Keyword">using</a> <a id="208" class="Symbol">(</a><a id="209" href="Data.List.Membership.Setoid.html#950" class="Function Operator">_∈_</a><a id="212" class="Symbol">;</a> <a id="214" href="Data.List.Membership.Setoid.html#999" class="Function Operator">_∉_</a><a id="217" class="Symbol">)</a>
<a id="219" class="Keyword">open</a> <a id="224" class="Keyword">import</a> <a id="231" href="Data.Maybe.html" class="Module">Data.Maybe</a> <a id="242" class="Keyword">using</a> <a id="248" class="Symbol">(</a><a id="249" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a><a id="254" class="Symbol">;</a> <a id="256" href="Data.Maybe.Base.html#1583" class="Function">maybe′</a><a id="262" class="Symbol">;</a> <a id="264" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a><a id="268" class="Symbol">;</a> <a id="270" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a><a id="277" class="Symbol">)</a>
<a id="279" class="Keyword">open</a> <a id="284" class="Keyword">import</a> <a id="291" href="Data.Nat.html" class="Module">Data.Nat</a> <a id="300" class="Keyword">using</a> <a id="306" class="Symbol">(</a><a id="307" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a><a id="308" class="Symbol">)</a>
<a id="310" class="Keyword">open</a> <a id="315" class="Keyword">import</a> <a id="322" href="Data.Nat.Properties.html" class="Module">Data.Nat.Properties</a> <a id="342" class="Keyword">using</a> <a id="348" class="Symbol">(</a><a id="349" href="Data.Nat.Properties.html#11695" class="Function">&lt;-strictTotalOrder</a><a id="367" class="Symbol">)</a>
<a id="369" class="Keyword">open</a> <a id="374" class="Keyword">import</a> <a id="381" href="Data.Product.html" class="Module">Data.Product</a> <a id="394" class="Keyword">using</a> <a id="400" class="Symbol">(</a><a id="401" href="Agda.Builtin.Sigma.html#165" class="Record">Σ</a><a id="402" class="Symbol">;</a> <a id="404" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">_,_</a><a id="407" class="Symbol">;</a> <a id="409" href="Data.Product.Base.html#852" class="Function">∃</a><a id="410" class="Symbol">;</a> <a id="412" href="Data.Product.Base.html#1244" class="Function">Σ-syntax</a><a id="420" class="Symbol">;</a> <a id="422" href="Data.Product.Base.html#1371" class="Function">∃-syntax</a><a id="430" class="Symbol">;</a> <a id="432" href="Data.Product.Base.html#1618" class="Function Operator">_×_</a><a id="435" class="Symbol">;</a> <a id="437" href="Data.Product.Base.html#636" class="Field">proj₁</a><a id="442" class="Symbol">;</a> <a id="444" href="Data.Product.Base.html#650" class="Field">proj₂</a><a id="449" class="Symbol">)</a>
<a id="451" class="Keyword">open</a> <a id="456" class="Keyword">import</a> <a id="463" href="Data.Unit.html" class="Module">Data.Unit</a> <a id="473" class="Keyword">using</a> <a id="479" class="Symbol">(</a><a id="480" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a><a id="481" class="Symbol">)</a>
<a id="483" class="Keyword">open</a> <a id="488" class="Keyword">import</a> <a id="495" href="Function.html" class="Module">Function</a> <a id="504" class="Keyword">using</a> <a id="510" class="Symbol">(</a><a id="511" href="Function.Base.html#1115" class="Function Operator">_∘_</a><a id="514" class="Symbol">)</a>
<a id="516" class="Keyword">open</a> <a id="521" class="Keyword">import</a> <a id="528" href="Haskell.Prelude.html" class="Module">Haskell.Prelude</a> <a id="544" class="Symbol">as</a> <a id="547" class="Module">Haskell</a> <a id="555" class="Keyword">using</a> <a id="561" class="Symbol">(</a><a id="562" href="Haskell.Prim.Eq.html#401" class="Record">Eq</a><a id="564" class="Symbol">;</a> <a id="566" href="Haskell.Prim.Eq.html#453" class="Field Operator">_==_</a><a id="570" class="Symbol">;</a> <a id="572" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">True</a><a id="576" class="Symbol">;</a> <a id="578" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">False</a><a id="583" class="Symbol">;</a> <a id="585" href="Haskell.Prim.Bool.html#138" class="Function Operator">_&amp;&amp;_</a><a id="589" class="Symbol">)</a>
<a id="591" class="Keyword">open</a> <a id="596" class="Keyword">import</a> <a id="603" href="Level.html" class="Module">Level</a> <a id="609" class="Keyword">using</a> <a id="615" class="Symbol">(</a><a id="616" href="Level.html#521" class="Function">0ℓ</a><a id="618" class="Symbol">)</a>
<a id="620" class="Keyword">open</a> <a id="625" class="Keyword">import</a> <a id="632" href="Relation.Binary.html" class="Module">Relation.Binary</a> <a id="648" class="Keyword">using</a> <a id="654" class="Symbol">(</a><a id="655" href="Relation.Binary.Bundles.html#8031" class="Record">StrictTotalOrder</a><a id="671" class="Symbol">;</a> <a id="673" href="Relation.Binary.Definitions.html#6469" class="Function">DecidableEquality</a><a id="690" class="Symbol">)</a>
<a id="692" class="Keyword">open</a> <a id="697" class="Keyword">import</a> <a id="704" href="Relation.Nullary.html" class="Module">Relation.Nullary</a> <a id="721" class="Keyword">using</a> <a id="727" class="Symbol">(</a><a id="728" href="Relation.Nullary.Decidable.Core.html#1618" class="InductiveConstructor">yes</a><a id="731" class="Symbol">;</a> <a id="733" href="Relation.Nullary.Decidable.Core.html#1655" class="InductiveConstructor">no</a><a id="735" class="Symbol">;</a> <a id="737" href="Relation.Nullary.Negation.Core.html#698" class="Function Operator">¬_</a><a id="739" class="Symbol">)</a>

<a id="742" class="Keyword">open</a> <a id="747" class="Keyword">import</a> <a id="754" href="Data.Nat.Properties.html" class="Module">Data.Nat.Properties</a> <a id="774" class="Keyword">using</a> <a id="780" class="Symbol">(</a><a id="781" href="Data.Nat.Properties.html#7413" class="Function">≤-totalOrder</a><a id="793" class="Symbol">)</a>
<a id="795" class="Keyword">open</a> <a id="800" class="Keyword">import</a> <a id="807" href="Data.List.Extrema.html" class="Module">Data.List.Extrema</a> <a id="825" class="Symbol">(</a><a id="826" href="Data.Nat.Properties.html#7413" class="Function">≤-totalOrder</a><a id="838" class="Symbol">)</a> <a id="840" class="Keyword">using</a> <a id="846" class="Symbol">(</a><a id="847" href="Data.List.Extrema.html#1840" class="Function">argmax</a><a id="853" class="Symbol">)</a>

<a id="856" class="Keyword">import</a> <a id="863" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="901" class="Symbol">as</a> <a id="904" class="Module">Equ</a>
<a id="908" class="Keyword">open</a> <a id="913" href="Relation.Binary.PropositionalEquality.html" class="Module">Equ</a> <a id="917" class="Keyword">using</a> <a id="923" class="Symbol">(</a><a id="924" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">_≡_</a><a id="927" class="Symbol">;</a> <a id="929" href="Relation.Binary.PropositionalEquality.Core.html#858" class="Function Operator">_≢_</a><a id="932" class="Symbol">;</a> <a id="934" href="Relation.Binary.PropositionalEquality.Core.html#1158" class="Function">cong</a><a id="938" class="Symbol">)</a>

<a id="941" class="Keyword">open</a> <a id="946" class="Keyword">import</a> <a id="953" href="Peras.Crypto.html" class="Module">Peras.Crypto</a>
<a id="966" class="Keyword">open</a> <a id="971" class="Keyword">import</a> <a id="978" href="Peras.Numbering.html" class="Module">Peras.Numbering</a>
<a id="994" class="Keyword">open</a> <a id="999" class="Keyword">import</a> <a id="1006" href="Peras.Util.html" class="Module">Peras.Util</a>

<a id="1018" class="Symbol">{-#</a> <a id="1022" class="Keyword">FOREIGN</a> <a id="1030" class="Pragma">AGDA2HS</a>
<a id="1038" class="Symbol">{-#</a> <a id="1042" class="Pragma">LANGUAGE</a> <a id="1051" class="Pragma">DeriveGeneric</a> <a id="1065" class="Symbol">#-}</a>
<a id="1069" class="Pragma">import</a> <a id="1076" class="Pragma">GHC.Generics</a> <a id="1089" class="Pragma">(Generic)</a>
<a id="1099" class="Pragma">import</a> <a id="1106" class="Pragma">Peras.Crypto</a> <a id="1119" class="Pragma">(Hash</a> <a id="1125" class="Pragma">(..),</a> <a id="1131" class="Pragma">Hashable</a> <a id="1140" class="Pragma">(..))</a>
<a id="1146" class="Pragma">import</a> <a id="1153" class="Pragma">Prelude</a> <a id="1161" class="Pragma">hiding</a> <a id="1168" class="Pragma">(round)</a>
<a id="1176" class="Symbol">#-}</a>

<a id="1181" class="Symbol">{-#</a> <a id="1185" class="Keyword">FOREIGN</a> <a id="1193" class="Pragma">GHC</a>
<a id="1197" class="Pragma">import</a> <a id="1204" class="Pragma">qualified</a> <a id="1214" class="Pragma">Peras.Block</a> <a id="1226" class="Pragma">as</a> <a id="1229" class="Pragma">G</a>
<a id="1231" class="Symbol">#-}</a>
</pre>-->
<h2 id="partyid">PartyId</h2>
<pre class="Agda"><a id="PartyId"></a><a id="1264" href="Peras.Block.html#1264" class="Function">PartyId</a> <a id="1272" class="Symbol">=</a> <a id="1274" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a>  <a id="1277" class="Comment">-- FIXME: Data.Fin ?</a>
</pre>
<!--
<pre class="Agda"><a id="1316" class="Symbol">{-#</a> <a id="1320" class="Keyword">FOREIGN</a> <a id="1328" class="Pragma">AGDA2HS</a>
<a id="1336" class="Pragma">--</a> <a id="1339" class="Pragma">Use</a> <a id="1343" class="Pragma">`Integer`</a> <a id="1353" class="Pragma">for</a> <a id="1357" class="Pragma">compatibility</a> <a id="1371" class="Pragma">with</a> <a id="1376" class="Pragma">`MAlonzo`.</a>
<a id="1387" class="Pragma">type</a> <a id="1392" class="Pragma">PartyId</a> <a id="1400" class="Pragma">=</a> <a id="1402" class="Pragma">Integer</a>
<a id="1410" class="Symbol">#-}</a>
</pre>-->
<h2 id="party">Party</h2>
<pre class="Agda"><a id="1441" class="Keyword">record</a> <a id="Party"></a><a id="1448" href="Peras.Block.html#1448" class="Record">Party</a> <a id="1454" class="Symbol">:</a> <a id="1456" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="1460" class="Keyword">where</a>
  <a id="1468" class="Keyword">constructor</a> <a id="MkParty"></a><a id="1480" href="Peras.Block.html#1480" class="InductiveConstructor">MkParty</a>
  <a id="1490" class="Keyword">field</a> <a id="Party.pid"></a><a id="1496" href="Peras.Block.html#1496" class="Field">pid</a> <a id="1500" class="Symbol">:</a> <a id="1502" href="Peras.Block.html#1264" class="Function">PartyId</a>
        <a id="Party.pkey"></a><a id="1518" href="Peras.Block.html#1518" class="Field">pkey</a> <a id="1523" class="Symbol">:</a> <a id="1525" href="Peras.Crypto.html#3675" class="Record">VerificationKey</a>

<a id="1542" class="Keyword">open</a> <a id="1547" href="Peras.Block.html#1448" class="Module">Party</a> <a id="1553" class="Keyword">public</a>

<a id="1561" class="Keyword">instance</a>
  <a id="iPartyEq"></a><a id="1572" href="Peras.Block.html#1572" class="Function">iPartyEq</a> <a id="1581" class="Symbol">:</a> <a id="1583" href="Haskell.Prim.Eq.html#401" class="Record">Eq</a> <a id="1586" href="Peras.Block.html#1448" class="Record">Party</a>
  <a id="1594" href="Peras.Block.html#1572" class="Function">iPartyEq</a> <a id="1603" class="Symbol">.</a><a id="1604" href="Haskell.Prim.Eq.html#453" class="Field Operator">Haskell._==_</a> <a id="1617" href="Peras.Block.html#1617" class="Bound">x</a> <a id="1619" href="Peras.Block.html#1619" class="Bound">y</a> <a id="1621" class="Symbol">=</a> <a id="1623" href="Peras.Block.html#1496" class="Field">pid</a> <a id="1627" href="Peras.Block.html#1617" class="Bound">x</a> <a id="1629" href="Haskell.Prim.Eq.html#453" class="Field Operator">Haskell.==</a> <a id="1640" href="Peras.Block.html#1496" class="Field">pid</a> <a id="1644" href="Peras.Block.html#1619" class="Bound">y</a> <a id="1646" href="Haskell.Prim.Bool.html#138" class="Function Operator">&amp;&amp;</a> <a id="1649" href="Peras.Block.html#1518" class="Field">pkey</a> <a id="1654" href="Peras.Block.html#1617" class="Bound">x</a> <a id="1656" href="Haskell.Prim.Eq.html#453" class="Field Operator">Haskell.==</a> <a id="1667" href="Peras.Block.html#1518" class="Field">pkey</a> <a id="1672" href="Peras.Block.html#1619" class="Bound">y</a>
</pre>
<!--
<pre class="Agda"><a id="1692" class="Symbol">{-#</a> <a id="1696" class="Keyword">COMPILE</a> <a id="1704" class="Keyword">AGDA2HS</a> <a id="1712" href="Peras.Block.html#1448" class="Record">Party</a> <a id="1718" class="Pragma">deriving</a> <a id="1727" class="Pragma">(Generic)</a> <a id="1737" class="Symbol">#-}</a>
<a id="1741" class="Symbol">{-#</a> <a id="1745" class="Keyword">COMPILE</a> <a id="1753" class="Keyword">GHC</a> <a id="1757" href="Peras.Block.html#1448" class="Record">Party</a> <a id="1763" class="Pragma">=</a> <a id="1765" class="Pragma">data</a> <a id="1770" class="Pragma">G.Party</a> <a id="1778" class="Pragma">(G.MkParty)</a> <a id="1790" class="Symbol">#-}</a>
<a id="1794" class="Symbol">{-#</a> <a id="1798" class="Keyword">COMPILE</a> <a id="1806" class="Keyword">AGDA2HS</a> <a id="1814" href="Peras.Block.html#1572" class="Function">iPartyEq</a> <a id="1823" class="Symbol">#-}</a>
</pre>-->
<h2 id="honesty-of-a-party">Honesty of a party</h2>
<pre class="Agda"><a id="1867" class="Keyword">data</a> <a id="Honesty"></a><a id="1872" href="Peras.Block.html#1872" class="Datatype">Honesty</a> <a id="1880" class="Symbol">:</a> <a id="1882" href="Peras.Block.html#1264" class="Function">PartyId</a> <a id="1890" class="Symbol">→</a> <a id="1892" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="1896" class="Keyword">where</a>

  <a id="Honesty.Honest"></a><a id="1905" href="Peras.Block.html#1905" class="InductiveConstructor">Honest</a> <a id="1912" class="Symbol">:</a> <a id="1914" class="Symbol">∀</a> <a id="1916" class="Symbol">{</a><a id="1917" href="Peras.Block.html#1917" class="Bound">p</a> <a id="1919" class="Symbol">:</a> <a id="1921" href="Peras.Block.html#1264" class="Function">PartyId</a><a id="1928" class="Symbol">}</a>
    <a id="1934" class="Symbol">→</a> <a id="1936" href="Peras.Block.html#1872" class="Datatype">Honesty</a> <a id="1944" href="Peras.Block.html#1917" class="Bound">p</a>

  <a id="Honesty.Corrupt"></a><a id="1949" href="Peras.Block.html#1949" class="InductiveConstructor">Corrupt</a> <a id="1957" class="Symbol">:</a> <a id="1959" class="Symbol">∀</a> <a id="1961" class="Symbol">{</a><a id="1962" href="Peras.Block.html#1962" class="Bound">p</a> <a id="1964" class="Symbol">:</a> <a id="1966" href="Peras.Block.html#1264" class="Function">PartyId</a><a id="1973" class="Symbol">}</a>
    <a id="1979" class="Symbol">→</a> <a id="1981" href="Peras.Block.html#1872" class="Datatype">Honesty</a> <a id="1989" href="Peras.Block.html#1962" class="Bound">p</a>
</pre>
<pre class="Agda"><a id="PartyTup"></a><a id="2003" href="Peras.Block.html#2003" class="Function">PartyTup</a> <a id="2012" class="Symbol">=</a> <a id="2014" href="Data.Product.Base.html#1371" class="Function">∃[</a> <a id="2017" href="Peras.Block.html#2017" class="Bound">p</a> <a id="2019" href="Data.Product.Base.html#1371" class="Function">]</a> <a id="2021" class="Symbol">(</a><a id="2022" href="Peras.Block.html#1872" class="Datatype">Honesty</a> <a id="2030" href="Peras.Block.html#2017" class="Bound">p</a><a id="2031" class="Symbol">)</a>
<a id="Parties"></a><a id="2033" href="Peras.Block.html#2033" class="Function">Parties</a> <a id="2041" class="Symbol">=</a> <a id="2043" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="2048" href="Peras.Block.html#2003" class="Function">PartyTup</a>
</pre>
<pre class="Agda"><a id="2070" class="Keyword">postulate</a>
  <a id="Honest≢Corrupt"></a><a id="2082" href="Peras.Block.html#2082" class="Postulate">Honest≢Corrupt</a> <a id="2097" class="Symbol">:</a> <a id="2099" class="Symbol">∀</a> <a id="2101" class="Symbol">{</a><a id="2102" href="Peras.Block.html#2102" class="Bound">p₁</a> <a id="2105" href="Peras.Block.html#2105" class="Bound">p₂</a><a id="2107" class="Symbol">}</a> <a id="2109" class="Symbol">{</a><a id="2110" href="Peras.Block.html#2110" class="Bound">h₁</a> <a id="2113" class="Symbol">:</a> <a id="2115" href="Peras.Block.html#1872" class="Datatype">Honesty</a> <a id="2123" href="Peras.Block.html#2102" class="Bound">p₁</a><a id="2125" class="Symbol">}</a> <a id="2127" class="Symbol">{</a><a id="2128" href="Peras.Block.html#2128" class="Bound">h₂</a> <a id="2131" class="Symbol">:</a> <a id="2133" href="Peras.Block.html#1872" class="Datatype">Honesty</a> <a id="2141" href="Peras.Block.html#2105" class="Bound">p₂</a><a id="2143" class="Symbol">}</a>
    <a id="2149" class="Symbol">→</a> <a id="2151" href="Peras.Block.html#2110" class="Bound">h₁</a> <a id="2154" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="2156" href="Peras.Block.html#1905" class="InductiveConstructor">Honest</a>
    <a id="2167" class="Symbol">→</a> <a id="2169" href="Peras.Block.html#2128" class="Bound">h₂</a> <a id="2172" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="2174" href="Peras.Block.html#1949" class="InductiveConstructor">Corrupt</a>
    <a id="2186" class="Symbol">→</a> <a id="2188" href="Peras.Block.html#2102" class="Bound">p₁</a> <a id="2191" href="Relation.Binary.PropositionalEquality.Core.html#858" class="Function Operator">≢</a> <a id="2193" href="Peras.Block.html#2105" class="Bound">p₂</a>

<a id="isHonest"></a><a id="2197" href="Peras.Block.html#2197" class="Function">isHonest</a> <a id="2206" class="Symbol">:</a> <a id="2208" class="Symbol">∀</a> <a id="2210" class="Symbol">{</a><a id="2211" href="Peras.Block.html#2211" class="Bound">p</a> <a id="2213" class="Symbol">:</a> <a id="2215" href="Peras.Block.html#1264" class="Function">PartyId</a><a id="2222" class="Symbol">}</a> <a id="2224" class="Symbol">→</a> <a id="2226" href="Peras.Block.html#1872" class="Datatype">Honesty</a> <a id="2234" href="Peras.Block.html#2211" class="Bound">p</a> <a id="2236" class="Symbol">→</a> <a id="2238" href="Agda.Builtin.Bool.html#173" class="Datatype">Bool</a>
<a id="2243" href="Peras.Block.html#2197" class="Function">isHonest</a> <a id="2252" class="Symbol">{</a><a id="2253" href="Peras.Block.html#2253" class="Bound">p</a><a id="2254" class="Symbol">}</a> <a id="2256" href="Peras.Block.html#1905" class="InductiveConstructor">Honest</a> <a id="2263" class="Symbol">=</a> <a id="2265" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">true</a>
<a id="2270" href="Peras.Block.html#2197" class="Function">isHonest</a> <a id="2279" class="Symbol">{</a><a id="2280" href="Peras.Block.html#2280" class="Bound">p</a><a id="2281" class="Symbol">}</a> <a id="2283" href="Peras.Block.html#1949" class="InductiveConstructor">Corrupt</a> <a id="2291" class="Symbol">=</a> <a id="2293" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">false</a>
</pre>
<h2 id="transactions">Transactions</h2>
<pre class="Agda"><a id="Tx"></a><a id="2329" href="Peras.Block.html#2329" class="Function">Tx</a> <a id="2332" class="Symbol">=</a> <a id="2334" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a>
</pre>
<!--
<pre class="Agda"><a id="2354" class="Symbol">{-#</a> <a id="2358" class="Keyword">COMPILE</a> <a id="2366" class="Keyword">AGDA2HS</a> <a id="2374" href="Peras.Block.html#2329" class="Function">Tx</a> <a id="2377" class="Symbol">#-}</a>
</pre>-->
<h2 id="block-and-certificate">Block and Certificate</h2>
<p>In addition to a Praos block, there is an optional field for the
included certificate. <strong>Note</strong>: What we name
<code>Block</code> is actually a block <em>Header</em>, we use
<code>BlockBody</code> to contain the payload.</p>
<p>A Peras Certificate represents an aggregated quorum of votes for a
specific block at a specific round. Such a certificate is supposed to be
self-contained and verifiable by any node.</p>
<pre class="Agda"><a id="2800" class="Keyword">record</a> <a id="Block"></a><a id="2807" href="Peras.Block.html#2807" class="Record">Block</a> <a id="2813" class="Symbol">:</a> <a id="2815" href="Agda.Primitive.html#388" class="Primitive">Set</a>
<a id="2819" class="Keyword">record</a> <a id="BlockBody"></a><a id="2826" href="Peras.Block.html#2826" class="Record">BlockBody</a> <a id="2836" class="Symbol">:</a> <a id="2838" href="Agda.Primitive.html#388" class="Primitive">Set</a>
<a id="2842" class="Keyword">record</a> <a id="Certificate"></a><a id="2849" href="Peras.Block.html#2849" class="Record">Certificate</a> <a id="2861" class="Symbol">:</a> <a id="2863" href="Agda.Primitive.html#388" class="Primitive">Set</a>

<a id="Payload"></a><a id="2868" href="Peras.Block.html#2868" class="Function">Payload</a> <a id="2876" class="Symbol">=</a> <a id="2878" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="2883" href="Peras.Block.html#2329" class="Function">Tx</a>

<a id="2887" class="Keyword">record</a> <a id="2894" href="Peras.Block.html#2849" class="Record">Certificate</a> <a id="2906" class="Keyword">where</a>
  <a id="2914" class="Keyword">constructor</a> <a id="MkCertificate"></a><a id="2926" href="Peras.Block.html#2926" class="InductiveConstructor">MkCertificate</a>
  <a id="2942" class="Keyword">field</a> <a id="Certificate.round"></a><a id="2948" href="Peras.Block.html#2948" class="Field">round</a> <a id="2954" class="Symbol">:</a> <a id="2956" href="Peras.Numbering.html#1669" class="Record">RoundNumber</a>
        <a id="Certificate.blockRef"></a><a id="2976" href="Peras.Block.html#2976" class="Field">blockRef</a> <a id="2985" class="Symbol">:</a> <a id="2987" href="Peras.Crypto.html#1542" class="Record">Hash</a> <a id="2992" href="Peras.Block.html#2807" class="Record">Block</a>

  <a id="Certificate.roundNumber"></a><a id="3001" href="Peras.Block.html#3001" class="Function">roundNumber</a> <a id="3013" class="Symbol">:</a> <a id="3015" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a>
  <a id="3019" href="Peras.Block.html#3001" class="Function">roundNumber</a> <a id="3031" class="Symbol">=</a> <a id="3033" href="Peras.Numbering.html#1729" class="Field">getRoundNumber</a> <a id="3048" href="Peras.Block.html#2948" class="Field">round</a>

<a id="3055" class="Keyword">open</a> <a id="3060" href="Peras.Block.html#2849" class="Module">Certificate</a> <a id="3072" class="Keyword">public</a>

<a id="latestCert"></a><a id="3080" href="Peras.Block.html#3080" class="Function">latestCert</a> <a id="3091" class="Symbol">:</a> <a id="3093" href="Peras.Block.html#2849" class="Record">Certificate</a> <a id="3105" class="Symbol">→</a> <a id="3107" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="3112" href="Peras.Block.html#2849" class="Record">Certificate</a> <a id="3124" class="Symbol">→</a> <a id="3126" href="Peras.Block.html#2849" class="Record">Certificate</a>
<a id="3138" href="Peras.Block.html#3080" class="Function">latestCert</a> <a id="3149" href="Peras.Block.html#3149" class="Bound">c</a> <a id="3151" class="Symbol">=</a> <a id="3153" href="Peras.Util.html#467" class="Function">maximumBy</a> <a id="3163" href="Peras.Block.html#3149" class="Bound">c</a> <a id="3165" class="Symbol">(</a><a id="3166" href="Peras.Util.html#727" class="Function">comparing</a> <a id="3176" href="Peras.Block.html#2948" class="Field">round</a><a id="3181" class="Symbol">)</a>

<a id="3184" class="Keyword">record</a> <a id="3191" href="Peras.Block.html#2807" class="Record">Block</a> <a id="3197" class="Keyword">where</a>
  <a id="3205" class="Keyword">constructor</a> <a id="MkBlock"></a><a id="3217" href="Peras.Block.html#3217" class="InductiveConstructor">MkBlock</a>
  <a id="3227" class="Keyword">field</a> <a id="Block.slotNumber"></a><a id="3233" href="Peras.Block.html#3233" class="Field">slotNumber</a> <a id="3244" class="Symbol">:</a> <a id="3246" href="Peras.Numbering.html#742" class="Record">SlotNumber</a>
        <a id="Block.creatorId"></a><a id="3265" href="Peras.Block.html#3265" class="Field">creatorId</a> <a id="3275" class="Symbol">:</a> <a id="3277" href="Peras.Block.html#1264" class="Function">PartyId</a>
        <a id="Block.parentBlock"></a><a id="3293" href="Peras.Block.html#3293" class="Field">parentBlock</a> <a id="3305" class="Symbol">:</a> <a id="3307" href="Peras.Crypto.html#1542" class="Record">Hash</a> <a id="3312" href="Peras.Block.html#2807" class="Record">Block</a>
        <a id="Block.certificate"></a><a id="3326" href="Peras.Block.html#3326" class="Field">certificate</a> <a id="3338" class="Symbol">:</a> <a id="3340" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="3346" href="Peras.Block.html#2849" class="Record">Certificate</a>
        <a id="Block.leadershipProof"></a><a id="3366" href="Peras.Block.html#3366" class="Field">leadershipProof</a> <a id="3382" class="Symbol">:</a> <a id="3384" href="Peras.Crypto.html#2593" class="Record">LeadershipProof</a>
        <a id="Block.signature"></a><a id="3408" href="Peras.Block.html#3408" class="Field">signature</a> <a id="3418" class="Symbol">:</a> <a id="3420" href="Peras.Crypto.html#3115" class="Record">Signature</a>
        <a id="Block.bodyHash"></a><a id="3438" href="Peras.Block.html#3438" class="Field">bodyHash</a> <a id="3447" class="Symbol">:</a> <a id="3449" href="Peras.Crypto.html#1542" class="Record">Hash</a> <a id="3454" href="Peras.Block.html#2868" class="Function">Payload</a>

  <a id="Block.slotNumber&#39;"></a><a id="3465" href="Peras.Block.html#3465" class="Function">slotNumber&#39;</a> <a id="3477" class="Symbol">:</a> <a id="3479" href="Agda.Builtin.Nat.html#203" class="Datatype">ℕ</a>
  <a id="3483" href="Peras.Block.html#3465" class="Function">slotNumber&#39;</a> <a id="3495" class="Symbol">=</a> <a id="3497" href="Peras.Numbering.html#800" class="Field">getSlotNumber</a> <a id="3511" href="Peras.Block.html#3233" class="Field">slotNumber</a>

<a id="3523" class="Keyword">open</a> <a id="3528" href="Peras.Block.html#2807" class="Module">Block</a> <a id="3534" class="Keyword">public</a>

<a id="_≟-BlockHash_"></a><a id="3542" href="Peras.Block.html#3542" class="Function Operator">_≟-BlockHash_</a> <a id="3556" class="Symbol">:</a> <a id="3558" href="Relation.Binary.Definitions.html#6469" class="Function">DecidableEquality</a> <a id="3576" class="Symbol">(</a><a id="3577" href="Peras.Crypto.html#1542" class="Record">Hash</a> <a id="3582" href="Peras.Block.html#2807" class="Record">Block</a><a id="3587" class="Symbol">)</a>
<a id="3589" class="Symbol">(</a><a id="3590" href="Peras.Crypto.html#1583" class="InductiveConstructor">MkHash</a> <a id="3597" href="Peras.Block.html#3597" class="Bound">b₁</a><a id="3599" class="Symbol">)</a> <a id="3601" href="Peras.Block.html#3542" class="Function Operator">≟-BlockHash</a> <a id="3613" class="Symbol">(</a><a id="3614" href="Peras.Crypto.html#1583" class="InductiveConstructor">MkHash</a> <a id="3621" href="Peras.Block.html#3621" class="Bound">b₂</a><a id="3623" class="Symbol">)</a> <a id="3625" class="Keyword">with</a> <a id="3630" href="Peras.Block.html#3597" class="Bound">b₁</a> <a id="3633" href="Peras.Crypto.html#825" class="Postulate Operator">≟-BS</a> <a id="3638" href="Peras.Block.html#3621" class="Bound">b₂</a>
<a id="3641" class="Symbol">...</a> <a id="3645" class="Symbol">|</a> <a id="3647" href="Relation.Nullary.Decidable.Core.html#1618" class="InductiveConstructor">yes</a> <a id="3651" href="Peras.Block.html#3651" class="Bound">p</a> <a id="3653" class="Symbol">=</a> <a id="3655" href="Relation.Nullary.Decidable.Core.html#1618" class="InductiveConstructor">yes</a> <a id="3659" class="Symbol">(</a><a id="3660" href="Relation.Binary.PropositionalEquality.Core.html#1158" class="Function">cong</a> <a id="3665" href="Peras.Crypto.html#1583" class="InductiveConstructor">MkHash</a> <a id="3672" href="Peras.Block.html#3651" class="Bound">p</a><a id="3673" class="Symbol">)</a>
<a id="3675" class="Symbol">...</a> <a id="3679" class="Symbol">|</a> <a id="3681" href="Relation.Nullary.Decidable.Core.html#1655" class="InductiveConstructor">no</a> <a id="3684" href="Peras.Block.html#3684" class="Bound">¬p</a> <a id="3687" class="Symbol">=</a>  <a id="3690" href="Relation.Nullary.Decidable.Core.html#1655" class="InductiveConstructor">no</a> <a id="3693" class="Symbol">(</a><a id="3694" href="Peras.Block.html#3684" class="Bound">¬p</a> <a id="3697" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="3699" href="Relation.Binary.PropositionalEquality.Core.html#1158" class="Function">cong</a> <a id="3704" href="Peras.Crypto.html#1598" class="Field">hashBytes</a><a id="3713" class="Symbol">)</a>

<a id="3716" class="Keyword">record</a> <a id="3723" href="Peras.Block.html#2826" class="Record">BlockBody</a> <a id="3733" class="Keyword">where</a>
  <a id="3741" class="Keyword">constructor</a> <a id="MkBlockBody"></a><a id="3753" href="Peras.Block.html#3753" class="InductiveConstructor">MkBlockBody</a>
  <a id="3767" class="Keyword">field</a> <a id="BlockBody.blockHash"></a><a id="3773" href="Peras.Block.html#3773" class="Field">blockHash</a> <a id="3783" class="Symbol">:</a> <a id="3785" href="Peras.Crypto.html#1542" class="Record">Hash</a> <a id="3790" href="Peras.Block.html#2868" class="Function">Payload</a>
        <a id="BlockBody.payload"></a><a id="3806" href="Peras.Block.html#3806" class="Field">payload</a> <a id="3814" class="Symbol">:</a> <a id="3816" href="Peras.Block.html#2868" class="Function">Payload</a>

<a id="3825" class="Keyword">open</a> <a id="3830" href="Peras.Block.html#2826" class="Module">BlockBody</a> <a id="3840" class="Keyword">public</a>
</pre>
<pre class="Agda"><a id="3859" class="Keyword">data</a> <a id="HonestBlock"></a><a id="3864" href="Peras.Block.html#3864" class="Datatype">HonestBlock</a> <a id="3876" class="Symbol">:</a> <a id="3878" href="Peras.Block.html#2807" class="Record">Block</a> <a id="3884" class="Symbol">→</a> <a id="3886" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="3890" class="Keyword">where</a>

  <a id="HonestBlock.HonestParty"></a><a id="3899" href="Peras.Block.html#3899" class="InductiveConstructor">HonestParty</a> <a id="3911" class="Symbol">:</a> <a id="3913" class="Symbol">∀</a> <a id="3915" class="Symbol">{</a><a id="3916" href="Peras.Block.html#3916" class="Bound">p</a> <a id="3918" class="Symbol">:</a> <a id="3920" href="Peras.Block.html#1264" class="Function">PartyId</a><a id="3927" class="Symbol">}</a> <a id="3929" class="Symbol">{</a><a id="3930" href="Peras.Block.html#3930" class="Bound">h</a> <a id="3932" class="Symbol">:</a> <a id="3934" href="Peras.Block.html#1872" class="Datatype">Honesty</a> <a id="3942" href="Peras.Block.html#3916" class="Bound">p</a><a id="3943" class="Symbol">}</a> <a id="3945" class="Symbol">{</a><a id="3946" href="Peras.Block.html#3946" class="Bound">b</a> <a id="3948" class="Symbol">:</a> <a id="3950" href="Peras.Block.html#2807" class="Record">Block</a><a id="3955" class="Symbol">}</a>
    <a id="3961" class="Symbol">→</a> <a id="3963" href="Peras.Block.html#3265" class="Field">creatorId</a> <a id="3973" href="Peras.Block.html#3946" class="Bound">b</a> <a id="3975" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="3977" href="Peras.Block.html#3916" class="Bound">p</a>
    <a id="3983" class="Symbol">→</a> <a id="3985" href="Peras.Block.html#3930" class="Bound">h</a> <a id="3987" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="3989" href="Peras.Block.html#1905" class="InductiveConstructor">Honest</a> <a id="3996" class="Symbol">{</a><a id="3997" href="Peras.Block.html#3916" class="Bound">p</a><a id="3998" class="Symbol">}</a>
    <a id="4004" class="Symbol">→</a> <a id="4006" href="Peras.Block.html#3864" class="Datatype">HonestBlock</a> <a id="4018" href="Peras.Block.html#3946" class="Bound">b</a>
</pre>
<!--
<pre class="Agda"><a id="4037" class="Symbol">{-#</a> <a id="4041" class="Keyword">COMPILE</a> <a id="4049" class="Keyword">AGDA2HS</a> <a id="4057" href="Peras.Block.html#2868" class="Function">Payload</a> <a id="4065" class="Symbol">#-}</a>
<a id="4069" class="Symbol">{-#</a> <a id="4073" class="Keyword">COMPILE</a> <a id="4081" class="Keyword">AGDA2HS</a> <a id="4089" href="Peras.Block.html#2807" class="Record">Block</a> <a id="4095" class="Pragma">deriving</a> <a id="4104" class="Pragma">(Generic)</a> <a id="4114" class="Symbol">#-}</a>
<a id="4118" class="Symbol">{-#</a> <a id="4122" class="Keyword">COMPILE</a> <a id="4130" class="Keyword">GHC</a> <a id="4134" href="Peras.Block.html#2807" class="Record">Block</a> <a id="4140" class="Pragma">=</a> <a id="4142" class="Pragma">data</a> <a id="4147" class="Pragma">G.Block</a> <a id="4155" class="Pragma">(G.MkBlock)</a> <a id="4167" class="Symbol">#-}</a>
<a id="4171" class="Symbol">{-#</a> <a id="4175" class="Keyword">COMPILE</a> <a id="4183" class="Keyword">AGDA2HS</a> <a id="4191" href="Peras.Block.html#2826" class="Record">BlockBody</a> <a id="4201" class="Pragma">deriving</a> <a id="4210" class="Pragma">(Generic)</a> <a id="4220" class="Symbol">#-}</a>
<a id="4224" class="Symbol">{-#</a> <a id="4228" class="Keyword">COMPILE</a> <a id="4236" class="Keyword">GHC</a> <a id="4240" href="Peras.Block.html#2826" class="Record">BlockBody</a> <a id="4250" class="Pragma">=</a> <a id="4252" class="Pragma">data</a> <a id="4257" class="Pragma">G.BlockBody</a> <a id="4269" class="Pragma">(G.MkBlockBody)</a> <a id="4285" class="Symbol">#-}</a>
<a id="4289" class="Symbol">{-#</a> <a id="4293" class="Keyword">COMPILE</a> <a id="4301" class="Keyword">AGDA2HS</a> <a id="4309" href="Peras.Block.html#2849" class="Record">Certificate</a> <a id="4321" class="Pragma">deriving</a> <a id="4330" class="Pragma">(Generic)</a> <a id="4340" class="Symbol">#-}</a>
<a id="4344" class="Symbol">{-#</a> <a id="4348" class="Keyword">COMPILE</a> <a id="4356" class="Keyword">GHC</a> <a id="4360" href="Peras.Block.html#2849" class="Record">Certificate</a> <a id="4372" class="Pragma">=</a> <a id="4374" class="Pragma">data</a> <a id="4379" class="Pragma">G.Certificate</a> <a id="4393" class="Pragma">(G.MkCertificate)</a> <a id="4411" class="Symbol">#-}</a>

<a id="4416" class="Keyword">instance</a>
  <a id="iMaybeEq"></a><a id="4427" href="Peras.Block.html#4427" class="Function">iMaybeEq</a> <a id="4436" class="Symbol">:</a> <a id="4438" class="Symbol">{</a><a id="4439" href="Peras.Block.html#4439" class="Bound">a</a> <a id="4441" class="Symbol">:</a> <a id="4443" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="4446" class="Symbol">}</a> <a id="4448" class="Symbol">→</a> <a id="4450" class="Symbol">⦃</a> <a id="4452" href="Peras.Block.html#4452" class="Bound">i</a> <a id="4454" class="Symbol">:</a> <a id="4456" href="Haskell.Prim.Eq.html#401" class="Record">Eq</a> <a id="4459" href="Peras.Block.html#4439" class="Bound">a</a> <a id="4461" class="Symbol">⦄</a> <a id="4463" class="Symbol">→</a> <a id="4465" href="Haskell.Prim.Eq.html#401" class="Record">Eq</a> <a id="4468" class="Symbol">(</a><a id="4469" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="4475" href="Peras.Block.html#4439" class="Bound">a</a><a id="4476" class="Symbol">)</a>
  <a id="4480" href="Peras.Block.html#4427" class="Function">iMaybeEq</a> <a id="4489" class="Symbol">{{</a><a id="4491" href="Peras.Block.html#4491" class="Bound">i</a><a id="4492" class="Symbol">}}</a> <a id="4495" class="Symbol">.</a><a id="4496" href="Haskell.Prim.Eq.html#453" class="Field Operator">_==_</a> <a id="4501" href="Peras.Block.html#4501" class="Bound">x</a> <a id="4503" href="Peras.Block.html#4503" class="Bound">y</a> <a id="4505" class="Symbol">=</a>
    <a id="4511" href="Data.Maybe.Base.html#1583" class="Function">maybe′</a>
      <a id="4524" class="Symbol">(λ</a> <a id="4527" href="Peras.Block.html#4527" class="Bound">x&#39;</a> <a id="4530" class="Symbol">→</a> <a id="4532" href="Data.Maybe.Base.html#1583" class="Function">maybe′</a> <a id="4539" class="Symbol">(λ</a> <a id="4542" href="Peras.Block.html#4542" class="Bound">y&#39;</a> <a id="4545" class="Symbol">→</a> <a id="4547" href="Peras.Block.html#4527" class="Bound">x&#39;</a> <a id="4550" href="Haskell.Prim.Eq.html#453" class="Field Operator">==</a> <a id="4553" href="Peras.Block.html#4542" class="Bound">y&#39;</a><a id="4555" class="Symbol">)</a> <a id="4557" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">False</a> <a id="4563" href="Peras.Block.html#4503" class="Bound">y</a><a id="4564" class="Symbol">)</a>
      <a id="4572" class="Symbol">(</a><a id="4573" href="Data.Maybe.Base.html#1583" class="Function">maybe′</a> <a id="4580" class="Symbol">(λ</a> <a id="4583" href="Peras.Block.html#4583" class="Bound">_</a> <a id="4585" class="Symbol">→</a> <a id="4587" href="Agda.Builtin.Bool.html#192" class="InductiveConstructor">False</a><a id="4592" class="Symbol">)</a> <a id="4594" href="Agda.Builtin.Bool.html#198" class="InductiveConstructor">True</a> <a id="4599" href="Peras.Block.html#4503" class="Bound">y</a><a id="4600" class="Symbol">)</a>
      <a id="4608" href="Peras.Block.html#4501" class="Bound">x</a>
</pre>-->
<pre class="Agda">
<a id="4628" class="Keyword">instance</a>
  <a id="iCertificateEq"></a><a id="4639" href="Peras.Block.html#4639" class="Function">iCertificateEq</a> <a id="4654" class="Symbol">:</a> <a id="4656" href="Haskell.Prim.Eq.html#401" class="Record">Eq</a> <a id="4659" href="Peras.Block.html#2849" class="Record">Certificate</a>
  <a id="4673" href="Peras.Block.html#4639" class="Function">iCertificateEq</a> <a id="4688" class="Symbol">.</a><a id="4689" href="Haskell.Prim.Eq.html#453" class="Field Operator">_==_</a> <a id="4694" href="Peras.Block.html#4694" class="Bound">x</a> <a id="4696" href="Peras.Block.html#4696" class="Bound">y</a> <a id="4698" class="Symbol">=</a> <a id="4700" href="Peras.Block.html#2948" class="Field">round</a> <a id="4706" href="Peras.Block.html#4694" class="Bound">x</a> <a id="4708" href="Haskell.Prim.Eq.html#453" class="Field Operator">==</a> <a id="4711" href="Peras.Block.html#2948" class="Field">round</a> <a id="4717" href="Peras.Block.html#4696" class="Bound">y</a> <a id="4719" href="Haskell.Prim.Bool.html#138" class="Function Operator">&amp;&amp;</a> <a id="4722" href="Peras.Block.html#2976" class="Field">blockRef</a> <a id="4731" href="Peras.Block.html#4694" class="Bound">x</a> <a id="4733" href="Haskell.Prim.Eq.html#453" class="Field Operator">==</a> <a id="4736" href="Peras.Block.html#2976" class="Field">blockRef</a> <a id="4745" href="Peras.Block.html#4696" class="Bound">y</a>

<a id="4748" class="Keyword">instance</a>
  <a id="iBlockEq"></a><a id="4759" href="Peras.Block.html#4759" class="Function">iBlockEq</a> <a id="4768" class="Symbol">:</a> <a id="4770" href="Haskell.Prim.Eq.html#401" class="Record">Eq</a> <a id="4773" href="Peras.Block.html#2807" class="Record">Block</a>
  <a id="4781" href="Peras.Block.html#4759" class="Function">iBlockEq</a> <a id="4790" class="Symbol">.</a><a id="4791" href="Haskell.Prim.Eq.html#453" class="Field Operator">_==_</a> <a id="4796" href="Peras.Block.html#4796" class="Bound">x</a> <a id="4798" href="Peras.Block.html#4798" class="Bound">y</a> <a id="4800" class="Symbol">=</a> <a id="4802" href="Peras.Block.html#3233" class="Field">slotNumber</a> <a id="4813" href="Peras.Block.html#4796" class="Bound">x</a> <a id="4815" href="Haskell.Prim.Eq.html#453" class="Field Operator">==</a> <a id="4818" href="Peras.Block.html#3233" class="Field">slotNumber</a> <a id="4829" href="Peras.Block.html#4798" class="Bound">y</a>
                         <a id="4856" href="Haskell.Prim.Bool.html#138" class="Function Operator">&amp;&amp;</a> <a id="4859" href="Peras.Block.html#3265" class="Field">creatorId</a> <a id="4869" href="Peras.Block.html#4796" class="Bound">x</a> <a id="4871" href="Haskell.Prim.Eq.html#453" class="Field Operator">==</a> <a id="4874" href="Peras.Block.html#3265" class="Field">creatorId</a> <a id="4884" href="Peras.Block.html#4798" class="Bound">y</a>
                         <a id="4911" href="Haskell.Prim.Bool.html#138" class="Function Operator">&amp;&amp;</a> <a id="4914" href="Peras.Block.html#3293" class="Field">parentBlock</a> <a id="4926" href="Peras.Block.html#4796" class="Bound">x</a> <a id="4928" href="Haskell.Prim.Eq.html#453" class="Field Operator">==</a> <a id="4931" href="Peras.Block.html#3293" class="Field">parentBlock</a> <a id="4943" href="Peras.Block.html#4798" class="Bound">y</a>
                         <a id="4970" href="Haskell.Prim.Bool.html#138" class="Function Operator">&amp;&amp;</a> <a id="4973" href="Peras.Block.html#3366" class="Field">leadershipProof</a> <a id="4989" href="Peras.Block.html#4796" class="Bound">x</a> <a id="4991" href="Haskell.Prim.Eq.html#453" class="Field Operator">==</a> <a id="4994" href="Peras.Block.html#3366" class="Field">leadershipProof</a> <a id="5010" href="Peras.Block.html#4798" class="Bound">y</a>
                         <a id="5037" href="Haskell.Prim.Bool.html#138" class="Function Operator">&amp;&amp;</a> <a id="5040" href="Peras.Block.html#3326" class="Field">certificate</a> <a id="5052" href="Peras.Block.html#4796" class="Bound">x</a> <a id="5054" href="Haskell.Prim.Eq.html#453" class="Field Operator">==</a> <a id="5057" href="Peras.Block.html#3326" class="Field">certificate</a> <a id="5069" href="Peras.Block.html#4798" class="Bound">y</a>
                         <a id="5096" href="Haskell.Prim.Bool.html#138" class="Function Operator">&amp;&amp;</a> <a id="5099" href="Peras.Block.html#3408" class="Field">signature</a> <a id="5109" href="Peras.Block.html#4796" class="Bound">x</a> <a id="5111" href="Haskell.Prim.Eq.html#453" class="Field Operator">==</a> <a id="5114" href="Peras.Block.html#3408" class="Field">signature</a> <a id="5124" href="Peras.Block.html#4798" class="Bound">y</a>
                         <a id="5151" href="Haskell.Prim.Bool.html#138" class="Function Operator">&amp;&amp;</a> <a id="5154" href="Peras.Block.html#3438" class="Field">bodyHash</a> <a id="5163" href="Peras.Block.html#4796" class="Bound">x</a> <a id="5165" href="Haskell.Prim.Eq.html#453" class="Field Operator">==</a> <a id="5168" href="Peras.Block.html#3438" class="Field">bodyHash</a> <a id="5177" href="Peras.Block.html#4798" class="Bound">y</a>
                         <a id="5204" class="Comment">-- FIXME: In principle, we only need to check equality of the signatures.</a>

<a id="5279" class="Keyword">instance</a>
  <a id="iBlockBodyEq"></a><a id="5290" href="Peras.Block.html#5290" class="Function">iBlockBodyEq</a> <a id="5303" class="Symbol">:</a> <a id="5305" href="Haskell.Prim.Eq.html#401" class="Record">Eq</a> <a id="5308" href="Peras.Block.html#2826" class="Record">BlockBody</a>
  <a id="5320" href="Peras.Block.html#5290" class="Function">iBlockBodyEq</a> <a id="5333" class="Symbol">.</a><a id="5334" href="Haskell.Prim.Eq.html#453" class="Field Operator">_==_</a> <a id="5339" href="Peras.Block.html#5339" class="Bound">x</a> <a id="5341" href="Peras.Block.html#5341" class="Bound">y</a> <a id="5343" class="Symbol">=</a> <a id="5345" href="Peras.Block.html#3773" class="Field">blockHash</a> <a id="5355" href="Peras.Block.html#5339" class="Bound">x</a> <a id="5357" href="Haskell.Prim.Eq.html#453" class="Field Operator">==</a> <a id="5360" href="Peras.Block.html#3773" class="Field">blockHash</a> <a id="5370" href="Peras.Block.html#5341" class="Bound">y</a> <a id="5372" href="Haskell.Prim.Bool.html#138" class="Function Operator">&amp;&amp;</a> <a id="5375" href="Peras.Block.html#3806" class="Field">payload</a> <a id="5383" href="Peras.Block.html#5339" class="Bound">x</a> <a id="5385" href="Haskell.Prim.Eq.html#453" class="Field Operator">==</a> <a id="5388" href="Peras.Block.html#3806" class="Field">payload</a> <a id="5396" href="Peras.Block.html#5341" class="Bound">y</a>

<a id="5399" class="Keyword">module</a> <a id="5406" href="Peras.Block.html#5406" class="Module">_</a> <a id="5408" class="Symbol">{</a><a id="5409" href="Peras.Block.html#5409" class="Bound">a</a> <a id="5411" class="Symbol">:</a> <a id="5413" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="5416" class="Symbol">}</a> <a id="5418" class="Symbol">⦃</a> <a id="5420" href="Peras.Block.html#5420" class="Bound">_</a> <a id="5422" class="Symbol">:</a> <a id="5424" href="Peras.Crypto.html#1994" class="Record">Hashable</a> <a id="5433" href="Peras.Block.html#5409" class="Bound">a</a> <a id="5435" class="Symbol">⦄</a>
  <a id="5439" class="Keyword">where</a>

  <a id="5448" class="Keyword">open</a> <a id="5453" href="Peras.Crypto.html#1994" class="Module">Hashable</a> <a id="5462" class="Symbol">⦃...⦄</a>

  <a id="5471" href="Peras.Block.html#5471" class="Function">hashHead</a> <a id="5480" class="Symbol">:</a> <a id="5482" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="5487" href="Peras.Block.html#5409" class="Bound">a</a> <a id="5489" class="Symbol">→</a> <a id="5491" href="Peras.Crypto.html#1542" class="Record">Hash</a> <a id="5496" href="Peras.Block.html#5409" class="Bound">a</a>
  <a id="5500" href="Peras.Block.html#5471" class="Function">hashHead</a> <a id="5509" href="Agda.Builtin.List.html#184" class="InductiveConstructor">Data.List.[]</a> <a id="5522" class="Symbol">=</a> <a id="5524" href="Peras.Crypto.html#1583" class="InductiveConstructor">MkHash</a> <a id="5531" href="Peras.Crypto.html#676" class="Postulate">emptyBS</a>
  <a id="5541" href="Peras.Block.html#5471" class="Function">hashHead</a> <a id="5550" class="Symbol">(</a><a id="5551" href="Peras.Block.html#5551" class="Bound">x</a> <a id="5553" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">Data.List.∷</a> <a id="5565" class="Symbol">_)</a> <a id="5568" class="Symbol">=</a> <a id="5570" href="Peras.Crypto.html#2033" class="Field">hash</a> <a id="5575" href="Peras.Block.html#5551" class="Bound">x</a>

<a id="5578" class="Symbol">{-#</a> <a id="5582" class="Keyword">COMPILE</a> <a id="5590" class="Keyword">AGDA2HS</a> <a id="5598" href="Peras.Block.html#5471" class="Function">hashHead</a> <a id="5607" class="Symbol">#-}</a>

<a id="5612" class="Keyword">private</a>
  <a id="5622" class="Keyword">open</a> <a id="5627" href="Peras.Crypto.html#1994" class="Module">Hashable</a>

  <a id="5639" class="Keyword">instance</a>
    <a id="hashBlock"></a><a id="5652" href="Peras.Block.html#5652" class="Function">hashBlock</a> <a id="5662" class="Symbol">:</a> <a id="5664" href="Peras.Crypto.html#1994" class="Record">Hashable</a> <a id="5673" href="Peras.Block.html#2807" class="Record">Block</a>
    <a id="5683" href="Peras.Block.html#5652" class="Function">hashBlock</a> <a id="5693" class="Symbol">.</a><a id="5694" href="Peras.Crypto.html#2033" class="Field">hash</a> <a id="5699" class="Symbol">=</a> <a id="5701" href="Peras.Crypto.html#1583" class="InductiveConstructor">MkHash</a> <a id="5708" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="5710" href="Peras.Crypto.html#3171" class="Field">bytesS</a> <a id="5717" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="5719" href="Peras.Block.html#3408" class="Field">signature</a>
</pre>
<!--
<pre class="Agda"><a id="5747" class="Symbol">{-#</a> <a id="5751" class="Keyword">COMPILE</a> <a id="5759" class="Keyword">AGDA2HS</a> <a id="5767" href="Peras.Block.html#4639" class="Function">iCertificateEq</a> <a id="5782" class="Symbol">#-}</a>
<a id="5786" class="Symbol">{-#</a> <a id="5790" class="Keyword">COMPILE</a> <a id="5798" class="Keyword">AGDA2HS</a> <a id="5806" href="Peras.Block.html#4759" class="Function">iBlockEq</a> <a id="5815" class="Symbol">#-}</a>
<a id="5819" class="Symbol">{-#</a> <a id="5823" class="Keyword">COMPILE</a> <a id="5831" class="Keyword">AGDA2HS</a> <a id="5839" href="Peras.Block.html#5290" class="Function">iBlockBodyEq</a> <a id="5852" class="Symbol">#-}</a>

<a id="5857" class="Symbol">{-#</a> <a id="5861" class="Keyword">COMPILE</a> <a id="5869" class="Keyword">AGDA2HS</a> <a id="5877" href="Peras.Block.html#5652" class="Function">hashBlock</a> <a id="5887" class="Symbol">#-}</a>
</pre>-->
</body>
</html>
