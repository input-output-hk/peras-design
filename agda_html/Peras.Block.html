<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Peras.Block</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <link rel="stylesheet" href="Agda.css" />
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<pre class="Agda"><a id="9" class="Keyword">module</a> <a id="16" href="Peras.Block.html" class="Module">Peras.Block</a> <a id="28" class="Keyword">where</a>
</pre>
<!--
<pre class="Agda"><a id="52" class="Keyword">open</a> <a id="57" class="Keyword">import</a> <a id="64" href="Haskell.Prelude.html" class="Module">Haskell.Prelude</a>

<a id="81" class="Keyword">open</a> <a id="86" class="Keyword">import</a> <a id="93" href="Data.Product.html" class="Module">Data.Product</a> <a id="106" class="Keyword">using</a> <a id="112" class="Symbol">(</a><a id="113" href="Data.Product.Base.html#852" class="Function">∃</a><a id="114" class="Symbol">;</a> <a id="116" href="Data.Product.Base.html#1371" class="Function">∃-syntax</a><a id="124" class="Symbol">)</a>

<a id="127" class="Keyword">open</a> <a id="132" class="Keyword">import</a> <a id="139" href="Peras.Crypto.html" class="Module">Peras.Crypto</a>
<a id="152" class="Keyword">open</a> <a id="157" class="Keyword">import</a> <a id="164" href="Peras.Numbering.html" class="Module">Peras.Numbering</a>
<a id="180" class="Keyword">open</a> <a id="185" class="Keyword">import</a> <a id="192" href="Peras.Util.html" class="Module">Peras.Util</a>

<a id="204" class="Symbol">{-#</a> <a id="208" class="Keyword">FOREIGN</a> <a id="216" class="Pragma">AGDA2HS</a>
<a id="224" class="Symbol">{-#</a> <a id="228" class="Pragma">LANGUAGE</a> <a id="237" class="Pragma">DeriveGeneric</a> <a id="251" class="Symbol">#-}</a>
<a id="255" class="Pragma">import</a> <a id="262" class="Pragma">GHC.Generics</a> <a id="275" class="Pragma">(Generic)</a>
<a id="285" class="Pragma">import</a> <a id="292" class="Pragma">Peras.Crypto</a> <a id="305" class="Pragma">(Hash</a> <a id="311" class="Pragma">(..),</a> <a id="317" class="Pragma">Hashable</a> <a id="326" class="Pragma">(..))</a>
<a id="332" class="Pragma">import</a> <a id="339" class="Pragma">Prelude</a> <a id="347" class="Pragma">hiding</a> <a id="354" class="Pragma">(round)</a>
<a id="362" class="Symbol">#-}</a>

<a id="367" class="Symbol">{-#</a> <a id="371" class="Keyword">FOREIGN</a> <a id="379" class="Pragma">GHC</a>
<a id="383" class="Pragma">import</a> <a id="390" class="Pragma">qualified</a> <a id="400" class="Pragma">Peras.Block</a> <a id="412" class="Pragma">as</a> <a id="415" class="Pragma">G</a>
<a id="417" class="Symbol">#-}</a>
</pre>-->
<h2 id="partyid">PartyId</h2>
<pre class="Agda"><a id="PartyId"></a><a id="450" href="Peras.Block.html#450" class="Function">PartyId</a> <a id="458" class="Symbol">=</a> <a id="460" href="Agda.Builtin.Nat.html#203" class="Datatype">Nat</a>
</pre>
<!--
<pre class="Agda"><a id="482" class="Symbol">{-#</a> <a id="486" class="Keyword">FOREIGN</a> <a id="494" class="Pragma">AGDA2HS</a>
<a id="502" class="Pragma">--</a> <a id="505" class="Pragma">Use</a> <a id="509" class="Pragma">`Integer`</a> <a id="519" class="Pragma">for</a> <a id="523" class="Pragma">compatibility</a> <a id="537" class="Pragma">with</a> <a id="542" class="Pragma">`MAlonzo`.</a>
<a id="553" class="Pragma">type</a> <a id="558" class="Pragma">PartyId</a> <a id="566" class="Pragma">=</a> <a id="568" class="Pragma">Integer</a>
<a id="576" class="Symbol">#-}</a>
</pre>-->
<h2 id="party">Party</h2>
<pre class="Agda"><a id="607" class="Keyword">record</a> <a id="Party"></a><a id="614" href="Peras.Block.html#614" class="Record">Party</a> <a id="620" class="Symbol">:</a> <a id="622" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="626" class="Keyword">where</a>
  <a id="634" class="Keyword">constructor</a> <a id="MkParty"></a><a id="646" href="Peras.Block.html#646" class="InductiveConstructor">MkParty</a>
  <a id="656" class="Keyword">field</a> <a id="Party.pid"></a><a id="662" href="Peras.Block.html#662" class="Field">pid</a> <a id="666" class="Symbol">:</a> <a id="668" href="Peras.Block.html#450" class="Function">PartyId</a>
        <a id="Party.pkey"></a><a id="684" href="Peras.Block.html#684" class="Field">pkey</a> <a id="689" class="Symbol">:</a> <a id="691" href="Peras.Crypto.html#3675" class="Record">VerificationKey</a>

<a id="708" class="Keyword">open</a> <a id="713" href="Peras.Block.html#614" class="Module">Party</a> <a id="719" class="Keyword">public</a>

<a id="727" class="Keyword">instance</a>
  <a id="iPartyEq"></a><a id="738" href="Peras.Block.html#738" class="Function">iPartyEq</a> <a id="747" class="Symbol">:</a> <a id="749" href="Haskell.Prim.Eq.html#401" class="Record">Eq</a> <a id="752" href="Peras.Block.html#614" class="Record">Party</a>
  <a id="760" href="Peras.Block.html#738" class="Function">iPartyEq</a> <a id="769" class="Symbol">.</a><a id="770" href="Haskell.Prim.Eq.html#453" class="Field Operator">_==_</a> <a id="775" href="Peras.Block.html#775" class="Bound">x</a> <a id="777" href="Peras.Block.html#777" class="Bound">y</a> <a id="779" class="Symbol">=</a> <a id="781" href="Peras.Block.html#662" class="Field">pid</a> <a id="785" href="Peras.Block.html#775" class="Bound">x</a> <a id="787" href="Haskell.Prim.Eq.html#453" class="Field Operator">==</a> <a id="790" href="Peras.Block.html#662" class="Field">pid</a> <a id="794" href="Peras.Block.html#777" class="Bound">y</a> <a id="796" href="Haskell.Prim.Bool.html#138" class="Function Operator">&amp;&amp;</a> <a id="799" href="Peras.Block.html#684" class="Field">pkey</a> <a id="804" href="Peras.Block.html#775" class="Bound">x</a> <a id="806" href="Haskell.Prim.Eq.html#453" class="Field Operator">==</a> <a id="809" href="Peras.Block.html#684" class="Field">pkey</a> <a id="814" href="Peras.Block.html#777" class="Bound">y</a>
</pre>
<!--
<pre class="Agda"><a id="834" class="Symbol">{-#</a> <a id="838" class="Keyword">COMPILE</a> <a id="846" class="Keyword">AGDA2HS</a> <a id="854" href="Peras.Block.html#614" class="Record">Party</a> <a id="860" class="Pragma">deriving</a> <a id="869" class="Pragma">(Generic)</a> <a id="879" class="Symbol">#-}</a>
<a id="883" class="Symbol">{-#</a> <a id="887" class="Keyword">COMPILE</a> <a id="895" class="Keyword">GHC</a> <a id="899" href="Peras.Block.html#614" class="Record">Party</a> <a id="905" class="Pragma">=</a> <a id="907" class="Pragma">data</a> <a id="912" class="Pragma">G.Party</a> <a id="920" class="Pragma">(G.MkParty)</a> <a id="932" class="Symbol">#-}</a>
<a id="936" class="Symbol">{-#</a> <a id="940" class="Keyword">COMPILE</a> <a id="948" class="Keyword">AGDA2HS</a> <a id="956" href="Peras.Block.html#738" class="Function">iPartyEq</a> <a id="965" class="Symbol">#-}</a>
</pre>-->
<h2 id="honesty-of-a-party">Honesty of a party</h2>
<pre class="Agda"><a id="1009" class="Keyword">data</a> <a id="Honesty"></a><a id="1014" href="Peras.Block.html#1014" class="Datatype">Honesty</a> <a id="1022" class="Symbol">:</a> <a id="1024" href="Peras.Block.html#450" class="Function">PartyId</a> <a id="1032" class="Symbol">→</a> <a id="1034" href="Agda.Primitive.html#388" class="Primitive">Set</a> <a id="1038" class="Keyword">where</a>

  <a id="Honesty.Honest"></a><a id="1047" href="Peras.Block.html#1047" class="InductiveConstructor">Honest</a> <a id="1054" class="Symbol">:</a> <a id="1056" class="Symbol">∀</a> <a id="1058" class="Symbol">{</a><a id="1059" href="Peras.Block.html#1059" class="Bound">p</a> <a id="1061" class="Symbol">:</a> <a id="1063" href="Peras.Block.html#450" class="Function">PartyId</a><a id="1070" class="Symbol">}</a>
    <a id="1076" class="Symbol">→</a> <a id="1078" href="Peras.Block.html#1014" class="Datatype">Honesty</a> <a id="1086" href="Peras.Block.html#1059" class="Bound">p</a>

  <a id="Honesty.Corrupt"></a><a id="1091" href="Peras.Block.html#1091" class="InductiveConstructor">Corrupt</a> <a id="1099" class="Symbol">:</a> <a id="1101" class="Symbol">∀</a> <a id="1103" class="Symbol">{</a><a id="1104" href="Peras.Block.html#1104" class="Bound">p</a> <a id="1106" class="Symbol">:</a> <a id="1108" href="Peras.Block.html#450" class="Function">PartyId</a><a id="1115" class="Symbol">}</a>
    <a id="1121" class="Symbol">→</a> <a id="1123" href="Peras.Block.html#1014" class="Datatype">Honesty</a> <a id="1131" href="Peras.Block.html#1104" class="Bound">p</a>
</pre>
<pre class="Agda"><a id="PartyTup"></a><a id="1146" href="Peras.Block.html#1146" class="Function">PartyTup</a> <a id="1155" class="Symbol">=</a> <a id="1157" href="Data.Product.Base.html#1371" class="Function">∃[</a> <a id="1160" href="Peras.Block.html#1160" class="Bound">p</a> <a id="1162" href="Data.Product.Base.html#1371" class="Function">]</a> <a id="1164" class="Symbol">(</a><a id="1165" href="Peras.Block.html#1014" class="Datatype">Honesty</a> <a id="1173" href="Peras.Block.html#1160" class="Bound">p</a><a id="1174" class="Symbol">)</a>
<a id="Parties"></a><a id="1176" href="Peras.Block.html#1176" class="Function">Parties</a> <a id="1184" class="Symbol">=</a> <a id="1186" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="1191" href="Peras.Block.html#1146" class="Function">PartyTup</a>
</pre>
<h2 id="transactions">Transactions</h2>
<pre class="Agda"><a id="Tx"></a><a id="1230" href="Peras.Block.html#1230" class="Function">Tx</a> <a id="1233" class="Symbol">=</a> <a id="1235" href="Agda.Builtin.Unit.html#175" class="Record">⊤</a>
</pre>
<!--
<pre class="Agda"><a id="1255" class="Symbol">{-#</a> <a id="1259" class="Keyword">COMPILE</a> <a id="1267" class="Keyword">AGDA2HS</a> <a id="1275" href="Peras.Block.html#1230" class="Function">Tx</a> <a id="1278" class="Symbol">#-}</a>
</pre>-->
<h2 id="block-and-certificate">Block and Certificate</h2>
<p>In addition to a Praos block, there is an optional field for the
included certificate. <strong>Note</strong>: What we name
<code>Block</code> is actually a block <em>Header</em>, we use
<code>BlockBody</code> to contain the payload.</p>
<p>A Peras Certificate represents an aggregated quorum of votes for a
specific block at a specific round. Such a certificate is supposed to be
self-contained and verifiable by any node.</p>
<pre class="Agda"><a id="1701" class="Keyword">record</a> <a id="Block"></a><a id="1708" href="Peras.Block.html#1708" class="Record">Block</a> <a id="1714" class="Symbol">:</a> <a id="1716" href="Agda.Primitive.html#388" class="Primitive">Set</a>
<a id="1720" class="Keyword">record</a> <a id="BlockBody"></a><a id="1727" href="Peras.Block.html#1727" class="Record">BlockBody</a> <a id="1737" class="Symbol">:</a> <a id="1739" href="Agda.Primitive.html#388" class="Primitive">Set</a>
<a id="1743" class="Keyword">record</a> <a id="Certificate"></a><a id="1750" href="Peras.Block.html#1750" class="Record">Certificate</a> <a id="1762" class="Symbol">:</a> <a id="1764" href="Agda.Primitive.html#388" class="Primitive">Set</a>

<a id="Payload"></a><a id="1769" href="Peras.Block.html#1769" class="Function">Payload</a> <a id="1777" class="Symbol">=</a> <a id="1779" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="1784" href="Peras.Block.html#1230" class="Function">Tx</a>

<a id="1788" class="Keyword">record</a> <a id="1795" href="Peras.Block.html#1750" class="Record">Certificate</a> <a id="1807" class="Keyword">where</a>
  <a id="1815" class="Keyword">constructor</a> <a id="MkCertificate"></a><a id="1827" href="Peras.Block.html#1827" class="InductiveConstructor">MkCertificate</a>
  <a id="1843" class="Keyword">pattern</a>
  <a id="1853" class="Keyword">field</a> <a id="Certificate.round"></a><a id="1859" href="Peras.Block.html#1859" class="Field">round</a> <a id="1865" class="Symbol">:</a> <a id="1867" href="Peras.Numbering.html#1669" class="Record">RoundNumber</a>
        <a id="Certificate.blockRef"></a><a id="1887" href="Peras.Block.html#1887" class="Field">blockRef</a> <a id="1896" class="Symbol">:</a> <a id="1898" href="Peras.Crypto.html#1542" class="Record">Hash</a> <a id="1903" href="Peras.Block.html#1708" class="Record">Block</a>

  <a id="Certificate.roundNumber"></a><a id="1912" href="Peras.Block.html#1912" class="Function">roundNumber</a> <a id="1924" class="Symbol">:</a> <a id="1926" href="Agda.Builtin.Nat.html#203" class="Datatype">Nat</a>
  <a id="1932" href="Peras.Block.html#1912" class="Function">roundNumber</a> <a id="1944" class="Symbol">=</a> <a id="1946" href="Peras.Numbering.html#1729" class="Field">getRoundNumber</a> <a id="1961" href="Peras.Block.html#1859" class="Field">round</a>

<a id="1968" class="Keyword">open</a> <a id="1973" href="Peras.Block.html#1750" class="Module">Certificate</a> <a id="1985" class="Keyword">public</a>

<a id="latestCert"></a><a id="1993" href="Peras.Block.html#1993" class="Function">latestCert</a> <a id="2004" class="Symbol">:</a> <a id="2006" href="Peras.Block.html#1750" class="Record">Certificate</a> <a id="2018" class="Symbol">→</a> <a id="2020" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="2025" href="Peras.Block.html#1750" class="Record">Certificate</a> <a id="2037" class="Symbol">→</a> <a id="2039" href="Peras.Block.html#1750" class="Record">Certificate</a>
<a id="2051" href="Peras.Block.html#1993" class="Function">latestCert</a> <a id="2062" href="Peras.Block.html#2062" class="Bound">c</a> <a id="2064" class="Symbol">=</a> <a id="2066" href="Peras.Util.html#727" class="Function">maximumBy</a> <a id="2076" href="Peras.Block.html#2062" class="Bound">c</a> <a id="2078" class="Symbol">(</a><a id="2079" href="Peras.Util.html#987" class="Function">comparing</a> <a id="2089" href="Peras.Block.html#1859" class="Field">round</a><a id="2094" class="Symbol">)</a>

<a id="2097" class="Keyword">record</a> <a id="2104" href="Peras.Block.html#1708" class="Record">Block</a> <a id="2110" class="Keyword">where</a>
  <a id="2118" class="Keyword">constructor</a> <a id="MkBlock"></a><a id="2130" href="Peras.Block.html#2130" class="InductiveConstructor">MkBlock</a>
  <a id="2140" class="Keyword">field</a> <a id="Block.slotNumber"></a><a id="2146" href="Peras.Block.html#2146" class="Field">slotNumber</a> <a id="2157" class="Symbol">:</a> <a id="2159" href="Peras.Numbering.html#742" class="Record">SlotNumber</a>
        <a id="Block.creatorId"></a><a id="2178" href="Peras.Block.html#2178" class="Field">creatorId</a> <a id="2188" class="Symbol">:</a> <a id="2190" href="Peras.Block.html#450" class="Function">PartyId</a>
        <a id="Block.parentBlock"></a><a id="2206" href="Peras.Block.html#2206" class="Field">parentBlock</a> <a id="2218" class="Symbol">:</a> <a id="2220" href="Peras.Crypto.html#1542" class="Record">Hash</a> <a id="2225" href="Peras.Block.html#1708" class="Record">Block</a>
        <a id="Block.certificate"></a><a id="2239" href="Peras.Block.html#2239" class="Field">certificate</a> <a id="2251" class="Symbol">:</a> <a id="2253" href="Haskell.Prim.Maybe.html#101" class="Datatype">Maybe</a> <a id="2259" href="Peras.Block.html#1750" class="Record">Certificate</a>
        <a id="Block.leadershipProof"></a><a id="2279" href="Peras.Block.html#2279" class="Field">leadershipProof</a> <a id="2295" class="Symbol">:</a> <a id="2297" href="Peras.Crypto.html#2593" class="Record">LeadershipProof</a>
        <a id="Block.signature"></a><a id="2321" href="Peras.Block.html#2321" class="Field">signature</a> <a id="2331" class="Symbol">:</a> <a id="2333" href="Peras.Crypto.html#3115" class="Record">Signature</a>
        <a id="Block.bodyHash"></a><a id="2351" href="Peras.Block.html#2351" class="Field">bodyHash</a> <a id="2360" class="Symbol">:</a> <a id="2362" href="Peras.Crypto.html#1542" class="Record">Hash</a> <a id="2367" href="Peras.Block.html#1769" class="Function">Payload</a>

  <a id="Block.slotNumber&#39;"></a><a id="2378" href="Peras.Block.html#2378" class="Function">slotNumber&#39;</a> <a id="2390" class="Symbol">:</a> <a id="2392" href="Agda.Builtin.Nat.html#203" class="Datatype">Nat</a>
  <a id="2398" href="Peras.Block.html#2378" class="Function">slotNumber&#39;</a> <a id="2410" class="Symbol">=</a> <a id="2412" href="Peras.Numbering.html#800" class="Field">getSlotNumber</a> <a id="2426" href="Peras.Block.html#2146" class="Field">slotNumber</a>

<a id="2438" class="Keyword">open</a> <a id="2443" href="Peras.Block.html#1708" class="Module">Block</a> <a id="2449" class="Keyword">public</a>

<a id="2457" class="Keyword">record</a> <a id="2464" href="Peras.Block.html#1727" class="Record">BlockBody</a> <a id="2474" class="Keyword">where</a>
  <a id="2482" class="Keyword">constructor</a> <a id="MkBlockBody"></a><a id="2494" href="Peras.Block.html#2494" class="InductiveConstructor">MkBlockBody</a>
  <a id="2508" class="Keyword">field</a> <a id="BlockBody.blockHash"></a><a id="2514" href="Peras.Block.html#2514" class="Field">blockHash</a> <a id="2524" class="Symbol">:</a> <a id="2526" href="Peras.Crypto.html#1542" class="Record">Hash</a> <a id="2531" href="Peras.Block.html#1769" class="Function">Payload</a>
        <a id="BlockBody.payload"></a><a id="2547" href="Peras.Block.html#2547" class="Field">payload</a> <a id="2555" class="Symbol">:</a> <a id="2557" href="Peras.Block.html#1769" class="Function">Payload</a>

<a id="2566" class="Keyword">open</a> <a id="2571" href="Peras.Block.html#1727" class="Module">BlockBody</a> <a id="2581" class="Keyword">public</a>
</pre>
<!--
<pre class="Agda"><a id="2605" class="Symbol">{-#</a> <a id="2609" class="Keyword">COMPILE</a> <a id="2617" class="Keyword">AGDA2HS</a> <a id="2625" href="Peras.Block.html#1769" class="Function">Payload</a> <a id="2633" class="Symbol">#-}</a>
<a id="2637" class="Symbol">{-#</a> <a id="2641" class="Keyword">COMPILE</a> <a id="2649" class="Keyword">AGDA2HS</a> <a id="2657" href="Peras.Block.html#1708" class="Record">Block</a> <a id="2663" class="Pragma">deriving</a> <a id="2672" class="Pragma">(Generic)</a> <a id="2682" class="Symbol">#-}</a>
<a id="2686" class="Symbol">{-#</a> <a id="2690" class="Keyword">COMPILE</a> <a id="2698" class="Keyword">GHC</a> <a id="2702" href="Peras.Block.html#1708" class="Record">Block</a> <a id="2708" class="Pragma">=</a> <a id="2710" class="Pragma">data</a> <a id="2715" class="Pragma">G.Block</a> <a id="2723" class="Pragma">(G.MkBlock)</a> <a id="2735" class="Symbol">#-}</a>
<a id="2739" class="Symbol">{-#</a> <a id="2743" class="Keyword">COMPILE</a> <a id="2751" class="Keyword">AGDA2HS</a> <a id="2759" href="Peras.Block.html#1727" class="Record">BlockBody</a> <a id="2769" class="Pragma">deriving</a> <a id="2778" class="Pragma">(Generic)</a> <a id="2788" class="Symbol">#-}</a>
<a id="2792" class="Symbol">{-#</a> <a id="2796" class="Keyword">COMPILE</a> <a id="2804" class="Keyword">GHC</a> <a id="2808" href="Peras.Block.html#1727" class="Record">BlockBody</a> <a id="2818" class="Pragma">=</a> <a id="2820" class="Pragma">data</a> <a id="2825" class="Pragma">G.BlockBody</a> <a id="2837" class="Pragma">(G.MkBlockBody)</a> <a id="2853" class="Symbol">#-}</a>
<a id="2857" class="Symbol">{-#</a> <a id="2861" class="Keyword">COMPILE</a> <a id="2869" class="Keyword">AGDA2HS</a> <a id="2877" href="Peras.Block.html#1750" class="Record">Certificate</a> <a id="2889" class="Pragma">deriving</a> <a id="2898" class="Pragma">(Generic)</a> <a id="2908" class="Symbol">#-}</a>
<a id="2912" class="Symbol">{-#</a> <a id="2916" class="Keyword">COMPILE</a> <a id="2924" class="Keyword">GHC</a> <a id="2928" href="Peras.Block.html#1750" class="Record">Certificate</a> <a id="2940" class="Pragma">=</a> <a id="2942" class="Pragma">data</a> <a id="2947" class="Pragma">G.Certificate</a> <a id="2961" class="Pragma">(G.MkCertificate)</a> <a id="2979" class="Symbol">#-}</a>
</pre>-->
<pre class="Agda"><a id="3000" class="Keyword">instance</a>
  <a id="iCertificateEq"></a><a id="3011" href="Peras.Block.html#3011" class="Function">iCertificateEq</a> <a id="3026" class="Symbol">:</a> <a id="3028" href="Haskell.Prim.Eq.html#401" class="Record">Eq</a> <a id="3031" href="Peras.Block.html#1750" class="Record">Certificate</a>
  <a id="3045" href="Peras.Block.html#3011" class="Function">iCertificateEq</a> <a id="3060" class="Symbol">.</a><a id="3061" href="Haskell.Prim.Eq.html#453" class="Field Operator">_==_</a> <a id="3066" href="Peras.Block.html#3066" class="Bound">x</a> <a id="3068" href="Peras.Block.html#3068" class="Bound">y</a> <a id="3070" class="Symbol">=</a> <a id="3072" href="Peras.Block.html#1859" class="Field">round</a> <a id="3078" href="Peras.Block.html#3066" class="Bound">x</a> <a id="3080" href="Haskell.Prim.Eq.html#453" class="Field Operator">==</a> <a id="3083" href="Peras.Block.html#1859" class="Field">round</a> <a id="3089" href="Peras.Block.html#3068" class="Bound">y</a> <a id="3091" href="Haskell.Prim.Bool.html#138" class="Function Operator">&amp;&amp;</a> <a id="3094" href="Peras.Block.html#1887" class="Field">blockRef</a> <a id="3103" href="Peras.Block.html#3066" class="Bound">x</a> <a id="3105" href="Haskell.Prim.Eq.html#453" class="Field Operator">==</a> <a id="3108" href="Peras.Block.html#1887" class="Field">blockRef</a> <a id="3117" href="Peras.Block.html#3068" class="Bound">y</a>

<a id="3120" class="Keyword">instance</a>
  <a id="iBlockEq"></a><a id="3131" href="Peras.Block.html#3131" class="Function">iBlockEq</a> <a id="3140" class="Symbol">:</a> <a id="3142" href="Haskell.Prim.Eq.html#401" class="Record">Eq</a> <a id="3145" href="Peras.Block.html#1708" class="Record">Block</a>
  <a id="3153" href="Peras.Block.html#3131" class="Function">iBlockEq</a> <a id="3162" class="Symbol">.</a><a id="3163" href="Haskell.Prim.Eq.html#453" class="Field Operator">_==_</a> <a id="3168" href="Peras.Block.html#3168" class="Bound">x</a> <a id="3170" href="Peras.Block.html#3170" class="Bound">y</a> <a id="3172" class="Symbol">=</a> <a id="3174" href="Peras.Block.html#2146" class="Field">slotNumber</a> <a id="3185" href="Peras.Block.html#3168" class="Bound">x</a> <a id="3187" href="Haskell.Prim.Eq.html#453" class="Field Operator">==</a> <a id="3190" href="Peras.Block.html#2146" class="Field">slotNumber</a> <a id="3201" href="Peras.Block.html#3170" class="Bound">y</a>
                         <a id="3228" href="Haskell.Prim.Bool.html#138" class="Function Operator">&amp;&amp;</a> <a id="3231" href="Peras.Block.html#2178" class="Field">creatorId</a> <a id="3241" href="Peras.Block.html#3168" class="Bound">x</a> <a id="3243" href="Haskell.Prim.Eq.html#453" class="Field Operator">==</a> <a id="3246" href="Peras.Block.html#2178" class="Field">creatorId</a> <a id="3256" href="Peras.Block.html#3170" class="Bound">y</a>
                         <a id="3283" href="Haskell.Prim.Bool.html#138" class="Function Operator">&amp;&amp;</a> <a id="3286" href="Peras.Block.html#2206" class="Field">parentBlock</a> <a id="3298" href="Peras.Block.html#3168" class="Bound">x</a> <a id="3300" href="Haskell.Prim.Eq.html#453" class="Field Operator">==</a> <a id="3303" href="Peras.Block.html#2206" class="Field">parentBlock</a> <a id="3315" href="Peras.Block.html#3170" class="Bound">y</a>
                         <a id="3342" href="Haskell.Prim.Bool.html#138" class="Function Operator">&amp;&amp;</a> <a id="3345" href="Peras.Block.html#2279" class="Field">leadershipProof</a> <a id="3361" href="Peras.Block.html#3168" class="Bound">x</a> <a id="3363" href="Haskell.Prim.Eq.html#453" class="Field Operator">==</a> <a id="3366" href="Peras.Block.html#2279" class="Field">leadershipProof</a> <a id="3382" href="Peras.Block.html#3170" class="Bound">y</a>
                         <a id="3409" href="Haskell.Prim.Bool.html#138" class="Function Operator">&amp;&amp;</a> <a id="3412" href="Peras.Block.html#2239" class="Field">certificate</a> <a id="3424" href="Peras.Block.html#3168" class="Bound">x</a> <a id="3426" href="Haskell.Prim.Eq.html#453" class="Field Operator">==</a> <a id="3429" href="Peras.Block.html#2239" class="Field">certificate</a> <a id="3441" href="Peras.Block.html#3170" class="Bound">y</a>
                         <a id="3468" href="Haskell.Prim.Bool.html#138" class="Function Operator">&amp;&amp;</a> <a id="3471" href="Peras.Block.html#2321" class="Field">signature</a> <a id="3481" href="Peras.Block.html#3168" class="Bound">x</a> <a id="3483" href="Haskell.Prim.Eq.html#453" class="Field Operator">==</a> <a id="3486" href="Peras.Block.html#2321" class="Field">signature</a> <a id="3496" href="Peras.Block.html#3170" class="Bound">y</a>
                         <a id="3523" href="Haskell.Prim.Bool.html#138" class="Function Operator">&amp;&amp;</a> <a id="3526" href="Peras.Block.html#2351" class="Field">bodyHash</a> <a id="3535" href="Peras.Block.html#3168" class="Bound">x</a> <a id="3537" href="Haskell.Prim.Eq.html#453" class="Field Operator">==</a> <a id="3540" href="Peras.Block.html#2351" class="Field">bodyHash</a> <a id="3549" href="Peras.Block.html#3170" class="Bound">y</a>
                         <a id="3576" class="Comment">-- FIXME: In principle, we only need to check equality of the signatures.</a>

<a id="3651" class="Keyword">instance</a>
  <a id="iBlockBodyEq"></a><a id="3662" href="Peras.Block.html#3662" class="Function">iBlockBodyEq</a> <a id="3675" class="Symbol">:</a> <a id="3677" href="Haskell.Prim.Eq.html#401" class="Record">Eq</a> <a id="3680" href="Peras.Block.html#1727" class="Record">BlockBody</a>
  <a id="3692" href="Peras.Block.html#3662" class="Function">iBlockBodyEq</a> <a id="3705" class="Symbol">.</a><a id="3706" href="Haskell.Prim.Eq.html#453" class="Field Operator">_==_</a> <a id="3711" href="Peras.Block.html#3711" class="Bound">x</a> <a id="3713" href="Peras.Block.html#3713" class="Bound">y</a> <a id="3715" class="Symbol">=</a> <a id="3717" href="Peras.Block.html#2514" class="Field">blockHash</a> <a id="3727" href="Peras.Block.html#3711" class="Bound">x</a> <a id="3729" href="Haskell.Prim.Eq.html#453" class="Field Operator">==</a> <a id="3732" href="Peras.Block.html#2514" class="Field">blockHash</a> <a id="3742" href="Peras.Block.html#3713" class="Bound">y</a> <a id="3744" href="Haskell.Prim.Bool.html#138" class="Function Operator">&amp;&amp;</a> <a id="3747" href="Peras.Block.html#2547" class="Field">payload</a> <a id="3755" href="Peras.Block.html#3711" class="Bound">x</a> <a id="3757" href="Haskell.Prim.Eq.html#453" class="Field Operator">==</a> <a id="3760" href="Peras.Block.html#2547" class="Field">payload</a> <a id="3768" href="Peras.Block.html#3713" class="Bound">y</a>

<a id="3771" class="Keyword">module</a> <a id="3778" href="Peras.Block.html#3778" class="Module">_</a> <a id="3780" class="Symbol">{</a><a id="3781" href="Peras.Block.html#3781" class="Bound">a</a> <a id="3783" class="Symbol">:</a> <a id="3785" href="Agda.Primitive.html#388" class="Primitive">Set</a><a id="3788" class="Symbol">}</a> <a id="3790" class="Symbol">⦃</a> <a id="3792" href="Peras.Block.html#3792" class="Bound">_</a> <a id="3794" class="Symbol">:</a> <a id="3796" href="Peras.Crypto.html#1994" class="Record">Hashable</a> <a id="3805" href="Peras.Block.html#3781" class="Bound">a</a> <a id="3807" class="Symbol">⦄</a>
  <a id="3811" class="Keyword">where</a>

  <a id="3820" class="Keyword">open</a> <a id="3825" href="Peras.Crypto.html#1994" class="Module">Hashable</a> <a id="3834" class="Symbol">⦃...⦄</a>

  <a id="3843" href="Peras.Block.html#3843" class="Function">tipHash</a> <a id="3851" class="Symbol">:</a> <a id="3853" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="3858" href="Peras.Block.html#3781" class="Bound">a</a> <a id="3860" class="Symbol">→</a> <a id="3862" href="Peras.Crypto.html#1542" class="Record">Hash</a> <a id="3867" href="Peras.Block.html#3781" class="Bound">a</a>
  <a id="3871" href="Peras.Block.html#3843" class="Function">tipHash</a> <a id="3879" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a> <a id="3882" class="Symbol">=</a> <a id="3884" href="Peras.Crypto.html#1583" class="InductiveConstructor">MkHash</a> <a id="3891" href="Peras.Crypto.html#676" class="Postulate">emptyBS</a>
  <a id="3901" href="Peras.Block.html#3843" class="Function">tipHash</a> <a id="3909" class="Symbol">(</a><a id="3910" href="Peras.Block.html#3910" class="Bound">x</a> <a id="3912" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="3914" class="Symbol">_)</a> <a id="3917" class="Symbol">=</a> <a id="3919" href="Peras.Crypto.html#2033" class="Field">hash</a> <a id="3924" href="Peras.Block.html#3910" class="Bound">x</a>

<a id="3927" class="Keyword">private</a>
  <a id="3937" class="Keyword">open</a> <a id="3942" href="Peras.Crypto.html#1994" class="Module">Hashable</a>
  <a id="3953" class="Keyword">instance</a>
    <a id="hashBlock"></a><a id="3966" href="Peras.Block.html#3966" class="Function">hashBlock</a> <a id="3976" class="Symbol">:</a> <a id="3978" href="Peras.Crypto.html#1994" class="Record">Hashable</a> <a id="3987" href="Peras.Block.html#1708" class="Record">Block</a>
    <a id="3997" href="Peras.Block.html#3966" class="Function">hashBlock</a> <a id="4007" class="Symbol">.</a><a id="4008" href="Peras.Crypto.html#2033" class="Field">hash</a> <a id="4013" class="Symbol">=</a> <a id="4015" href="Peras.Crypto.html#1583" class="InductiveConstructor">MkHash</a> <a id="4022" href="Haskell.Prim.html#1330" class="Function Operator">∘</a> <a id="4024" href="Peras.Crypto.html#3171" class="Field">bytesS</a> <a id="4031" href="Haskell.Prim.html#1330" class="Function Operator">∘</a> <a id="4033" href="Peras.Block.html#2321" class="Field">signature</a>

<a id="4044" class="Symbol">{-#</a> <a id="4048" class="Keyword">COMPILE</a> <a id="4056" class="Keyword">AGDA2HS</a> <a id="4064" href="Peras.Block.html#3843" class="Function">tipHash</a> <a id="4072" class="Symbol">#-}</a>
<a id="4076" class="Symbol">{-#</a> <a id="4080" class="Keyword">COMPILE</a> <a id="4088" class="Keyword">AGDA2HS</a> <a id="4096" href="Peras.Block.html#3011" class="Function">iCertificateEq</a> <a id="4111" class="Symbol">#-}</a>
<a id="4115" class="Symbol">{-#</a> <a id="4119" class="Keyword">COMPILE</a> <a id="4127" class="Keyword">AGDA2HS</a> <a id="4135" href="Peras.Block.html#3131" class="Function">iBlockEq</a> <a id="4144" class="Symbol">#-}</a>
<a id="4148" class="Symbol">{-#</a> <a id="4152" class="Keyword">COMPILE</a> <a id="4160" class="Keyword">AGDA2HS</a> <a id="4168" href="Peras.Block.html#3662" class="Function">iBlockBodyEq</a> <a id="4181" class="Symbol">#-}</a>
<a id="4185" class="Symbol">{-#</a> <a id="4189" class="Keyword">COMPILE</a> <a id="4197" class="Keyword">AGDA2HS</a> <a id="4205" href="Peras.Block.html#3966" class="Function">hashBlock</a> <a id="4215" class="Symbol">#-}</a>
</pre>
</body>
</html>
