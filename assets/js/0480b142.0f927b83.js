"use strict";(self.webpackChunksite=self.webpackChunksite||[]).push([[8070],{8614:(e,o,t)=>{t.r(o),t.d(o,{assets:()=>c,contentTitle:()=>i,default:()=>d,frontMatter:()=>r,metadata:()=>n,toc:()=>l});var s=t(4848),a=t(8453);const r={sidebar_label:"F.A.Q.",sidebar_position:2},i="Ouroboros Peras FAQ",n={id:"faq",title:"Ouroboros Peras FAQ",description:"Where is the Ouroboros Peras protocol defined?",source:"@site/docs/faq.md",sourceDirName:".",slug:"/faq",permalink:"/docs/faq",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/faq.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_label:"F.A.Q.",sidebar_position:2},sidebar:"DocumentsSidebar",previous:{title:"Introduction",permalink:"/docs/intro"},next:{title:"Reports",permalink:"/docs/reports/"}},c={},l=[{value:"Where is the Ouroboros Peras protocol defined?",id:"where-is-the-ouroboros-peras-protocol-defined",level:2},{value:"What are the benefits of Peras?",id:"what-are-the-benefits-of-peras",level:2},{value:"Why is faster settlement beneficial to Cardano?",id:"why-is-faster-settlement-beneficial-to-cardano",level:2},{value:"How do we know that Peras is safe?",id:"how-do-we-know-that-peras-is-safe",level:2},{value:"Does Peras open Cardano to new types of attacks?",id:"does-peras-open-cardano-to-new-types-of-attacks",level:2},{value:"What is a \u2018certified block\u2019 in Peras?",id:"what-is-a-certified-block-in-peras",level:2},{value:"How does Peras voting affect a node\u2019s selection of its preferred chain?",id:"how-does-peras-voting-affect-a-nodes-selection-of-its-preferred-chain",level:2},{value:"Does Peras change the cost of transactions or affect staking rewards?",id:"does-peras-change-the-cost-of-transactions-or-affect-staking-rewards",level:2},{value:"Will Peras require a hard fork?",id:"will-peras-require-a-hard-fork",level:2},{value:"How will Peras affect stake pool operators (SPOs)?",id:"how-will-peras-affect-stake-pool-operators-spos",level:2},{value:"How does Peras affect Cardano blocks?",id:"how-does-peras-affect-cardano-blocks",level:2},{value:"When will Peras be available on the Cardano blockchain?",id:"when-will-peras-be-available-on-the-cardano-blockchain",level:2},{value:"Does Peras conflict with Ouroboros Leios?",id:"does-peras-conflict-with-ouroboros-leios",level:2},{value:"Does Peras conflict with Ouroboros Genesis?",id:"does-peras-conflict-with-ouroboros-genesis",level:2},{value:"Why aren\u2019t all Peras votes and certificates stored in blocks?",id:"why-arent-all-peras-votes-and-certificates-stored-in-blocks",level:2},{value:"How long do Peras votes have to be stored off-chain?",id:"how-long-do-peras-votes-have-to-be-stored-off-chain",level:2},{value:"How long do Peras certificates have to be stored off-chain?",id:"how-long-do-peras-certificates-have-to-be-stored-off-chain",level:2},{value:"Who came up with Peras?",id:"who-came-up-with-peras",level:2},{value:"How will Peras affect the user experience of interacting with DApps?",id:"how-will-peras-affect-the-user-experience-of-interacting-with-dapps",level:2},{value:"How will Peras affect the user experience of interacting with centralized exchanges?",id:"how-will-peras-affect-the-user-experience-of-interacting-with-centralized-exchanges",level:2},{value:"Can Peras help reduce network congestion during peak usage periods?",id:"can-peras-help-reduce-network-congestion-during-peak-usage-periods",level:2},{value:"Will Peras introduce any new considerations for smart contract development and deployment on Cardano?",id:"will-peras-introduce-any-new-considerations-for-smart-contract-development-and-deployment-on-cardano",level:2},{value:"How often do we expect to revert back to Praos?",id:"how-often-do-we-expect-to-revert-back-to-praos",level:2},{value:"How does Peras achieve fast finality on top of Nakamoto consensus that is known to have slow finality?",id:"how-does-peras-achieve-fast-finality-on-top-of-nakamoto-consensus-that-is-known-to-have-slow-finality",level:2},{value:"Is Peras a layer 2?",id:"is-peras-a-layer-2",level:2},{value:"Which other CIPs will need PRs when Peras is adopted?",id:"which-other-cips-will-need-prs-when-peras-is-adopted",level:2},{value:"Will relay nodes need to track boosted blocks?",id:"will-relay-nodes-need-to-track-boosted-blocks",level:2},{value:"What is the lightest way for clients to know whether a block has a Peras boost?",id:"what-is-the-lightest-way-for-clients-to-know-whether-a-block-has-a-peras-boost",level:2}];function h(e){const o={a:"a",h1:"h1",h2:"h2",li:"li",p:"p",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.h1,{id:"ouroboros-peras-faq",children:"Ouroboros Peras FAQ"}),"\n",(0,s.jsx)(o.h2,{id:"where-is-the-ouroboros-peras-protocol-defined",children:"Where is the Ouroboros Peras protocol defined?"}),"\n",(0,s.jsxs)(o.p,{children:["Ouroboros Peras (henceforth, Peras) is defined in the Cardano Improvement Proposal (CIP) ",(0,s.jsx)(o.a,{href:"https://github.com/cardano-foundation/CIPs/pull/872",children:"Ouroboros Peras - Faster Settlement"}),". The CIP motivates Peras, formally and informally specifies the protocol, and provides evidence that Peras significantly reduces settlement time without much impact on nodes\u2019 operating costs."]}),"\n",(0,s.jsx)(o.h2,{id:"what-are-the-benefits-of-peras",children:"What are the benefits of Peras?"}),"\n",(0,s.jsx)(o.p,{children:"Peras dramatically improves the settlement time of Cardano transactions by having a committee of block-producing nodes periodically vote to certify blocks. Certified blocks decrease the likelihood of a rollback according to protocol parameters, so any transactions in (or preceding) those blocks, and therefore the chain they form, become effectively irreversible much faster than with Praos. Peras voting rounds may be as short as a minute or two, meaning that certified blocks appear that regularly and settle the preceding transactions at that frequency."}),"\n",(0,s.jsx)(o.h2,{id:"why-is-faster-settlement-beneficial-to-cardano",children:"Why is faster settlement beneficial to Cardano?"}),"\n",(0,s.jsx)(o.p,{children:"Faster settlement benefits use cases such as exchanges (both decentralized and centralized), bridges, partner chains, and DApps by providing effective assurances that a transaction will not be rolled back. In such use cases, the party would wait until they observe a certified block at or after their transaction."}),"\n",(0,s.jsx)(o.h2,{id:"how-do-we-know-that-peras-is-safe",children:"How do we know that Peras is safe?"}),"\n",(0,s.jsx)(o.p,{children:"Peras is backed by research that proves the protocol\u2019s liveness, consistency, self-healing, and security properties. A detailed analysis of the protocol and its potential implementation has been conducted by a team of dedicated engineers over the course of 2024."}),"\n",(0,s.jsx)(o.h2,{id:"does-peras-open-cardano-to-new-types-of-attacks",children:"Does Peras open Cardano to new types of attacks?"}),"\n",(0,s.jsx)(o.p,{children:"While Peras inherits the safety guarantees of Ouroboros Praos, adversaries selected for the Peras voting committee in a particular voting round might attempt to disrupt the voting process by choosing to withhold their votes or vote for non-preferred chains. This would prevent honest parties from forming a quorum of votes for a candidate block and delay settlement time. Such attacks become increasingly likely to succeed as the adversarial stake approaches 25% of the total stake, but the Peras protocol mitigates this problem by temporarily stopping voting if a quorum is not reached in each round."}),"\n",(0,s.jsx)(o.h2,{id:"what-is-a-certified-block-in-peras",children:"What is a \u2018certified block\u2019 in Peras?"}),"\n",(0,s.jsx)(o.p,{children:"A block that has received a quorum of votes from the Peras voting committee is considered to be \u2018certified\u2019 and is assigned some weight. While standard blocks have a weight of 1, blocks certified by a quorum of Peras votes have their weight boosted according to the protocol parameter B, therefore influencing nodes\u2019 choice of the preferred chain."}),"\n",(0,s.jsx)(o.h2,{id:"how-does-peras-voting-affect-a-nodes-selection-of-its-preferred-chain",children:"How does Peras voting affect a node\u2019s selection of its preferred chain?"}),"\n",(0,s.jsx)(o.p,{children:"In Ouroboros Praos, nodes select their preferred chain following the longest chain rule. In Peras, nodes select their preferred chain following the heaviest chain rule. This implies that certified blocks have a higher impact than normal blocks on chain selection.\nWhat does \u2018cooldown period\u2019 mean in Peras?"}),"\n",(0,s.jsx)(o.p,{children:"If the Peras voting committee fails to reach quorum, the protocol enters a 'cooldown' period, during which voting is suspended, and the protocol operates like Ouroboros Praos. This cooldown is necessary because a failure to reach quorum at some round could allow an attacker to complete the quorum later. By continuing this attack over multiple rounds, the attacker could at some point cause a significant reorganization of the chain, leading to a safety violation. During the cooldown, no voting or boosting occurs until the potential adversarial advantage is mitigated. After sufficient time for chain healing, restoration of chain quality, and assurance of a common chain prefix, the protocol emerges from the cooldown period and resumes voting."}),"\n",(0,s.jsx)(o.h2,{id:"does-peras-change-the-cost-of-transactions-or-affect-staking-rewards",children:"Does Peras change the cost of transactions or affect staking rewards?"}),"\n",(0,s.jsx)(o.p,{children:"Peras only affects the consensus protocol and has no impact on the cost of transactions. However, the voting process requires resources from stake pool operators (see below) and the community might decide to reward those."}),"\n",(0,s.jsx)(o.h2,{id:"will-peras-require-a-hard-fork",children:"Will Peras require a hard fork?"}),"\n",(0,s.jsx)(o.p,{children:"Yes, because Peras changes the consensus protocol and the block structure."}),"\n",(0,s.jsx)(o.h2,{id:"how-will-peras-affect-stake-pool-operators-spos",children:"How will Peras affect stake pool operators (SPOs)?"}),"\n",(0,s.jsx)(o.p,{children:"Peras will modestly increase the cost of operating a block-producing Cardano node because it requires slightly more bandwidth than Praos. A recent analysis estimates that network traffic will increase by about 14 kB/s, which may cost an additional $3.8/month at current cloud computing prices."}),"\n",(0,s.jsx)(o.h2,{id:"how-does-peras-affect-cardano-blocks",children:"How does Peras affect Cardano blocks?"}),"\n",(0,s.jsx)(o.p,{children:"Peras leaves the Cardano block header unchanged, but it augments the block body with the option to record a Peras certificate. The size of the certificate depends upon the size of the Peras voting committee and the cryptographic technique used to create the certificate, but generally speaking, a Peras certificate might be approximately 50 kB.\nIn normal operating conditions Peras certificates will not be recorded in blocks. If the Peras protocol enters a \u2018cooldown\u2019 period however, one or two certificates will be included in blocks early on during cooldown. Overall, this rare inclusion of a certificate in a block body will have minimal impact on block utilization."}),"\n",(0,s.jsx)(o.h2,{id:"when-will-peras-be-available-on-the-cardano-blockchain",children:"When will Peras be available on the Cardano blockchain?"}),"\n",(0,s.jsx)(o.p,{children:"As the new constitution for Cardano comes into force, this decision will need to be voted for by the community."}),"\n",(0,s.jsx)(o.h2,{id:"does-peras-conflict-with-ouroboros-leios",children:"Does Peras conflict with Ouroboros Leios?"}),"\n",(0,s.jsx)(o.p,{children:"Peras modifies the chain selection algorithm of Ouroboros Praos to speed up settlement. Ouroboros Leios adds stake-based block endorsing to increase throughput. Thus, Peras deals with settlement speed and Leios deals with transaction volume. Leios can build on any base protocol, such as Praos or Peras, that possess a few specific properties. A recent video \u2018Scaling Blockchain Protocols\u2019 by Input | Output\u2019s chief scientist Aggelos Kiayias discusses how Peras and Leios work together to improve settlement times and throughput on Cardano. It's worth noting that Peras and Leios use similar staked-based voting mechanisms, which implies Leios will benefit from developments required by Peras."}),"\n",(0,s.jsx)(o.h2,{id:"does-peras-conflict-with-ouroboros-genesis",children:"Does Peras conflict with Ouroboros Genesis?"}),"\n",(0,s.jsx)(o.p,{children:"Ouroboros Genesis solves the problem of dynamic availability of block-producing nodes by introducing the \u2018densest chain\u2019 preference in nodes\u2019 selection of their preferred chain. The original Genesis protocol measures density in terms of the number of blocks. When Genesis and Peras are combined, density is measured in terms of the weight of blocks. In Peras, the weight of a chain is its number of blocks plus the boost parameter B times the number of blocks certified in Peras voting rounds. Genesis\u2019s density concept is fully compatible with Peras\u2019s weight concept.\nInstead of adding a voting layer with Peras, why not just switch to using a traditional voting-based BFT protocol?\nPeras retains the Praos protocol structure along with the security, scaling, decentralization, and dynamism advantages of the Ouroboros family of Nakamoto protocols while improving their settlement times. Additionally, Peras has self-healing properties, which BFT protocols do not."}),"\n",(0,s.jsx)(o.h2,{id:"why-arent-all-peras-votes-and-certificates-stored-in-blocks",children:"Why aren\u2019t all Peras votes and certificates stored in blocks?"}),"\n",(0,s.jsx)(o.p,{children:"It is not necessary to store all votes and certificates in blocks for the protocol's security. Doing so would therefore unnecessarily utilize a large fraction of a block\u2019s size budget, reducing the number of transactions that can be stored in blocks and lowering overall throughput."}),"\n",(0,s.jsx)(o.h2,{id:"how-long-do-peras-votes-have-to-be-stored-off-chain",children:"How long do Peras votes have to be stored off-chain?"}),"\n",(0,s.jsx)(o.p,{children:"Peras votes only need to be retained until they either expire (which is determined by a Peras protocol parameter) or are incorporated into a Peras certificate (since a certificate simply aggregates a quorum of votes). Nodes can store votes in transient memory and provide them to newly syncing nodes as they replace the recent history of blocks."}),"\n",(0,s.jsx)(o.h2,{id:"how-long-do-peras-certificates-have-to-be-stored-off-chain",children:"How long do Peras certificates have to be stored off-chain?"}),"\n",(0,s.jsx)(o.p,{children:"Peras nodes must forever persist certificates to disk so they can be provided to newly syncing nodes as they replay block history."}),"\n",(0,s.jsx)(o.h2,{id:"who-came-up-with-peras",children:"Who came up with Peras?"}),"\n",(0,s.jsx)(o.p,{children:"Input | Output\u2019s research team created Peras."}),"\n",(0,s.jsx)(o.h2,{id:"how-will-peras-affect-the-user-experience-of-interacting-with-dapps",children:"How will Peras affect the user experience of interacting with DApps?"}),"\n",(0,s.jsx)(o.p,{children:"Peras primarily focuses on improving transaction settlement time, which means faster confirmation times for users. This will lead to a more responsive and efficient experience when interacting with DApps that incorporate settlement time constraints in the user interface."}),"\n",(0,s.jsx)(o.h2,{id:"how-will-peras-affect-the-user-experience-of-interacting-with-centralized-exchanges",children:"How will Peras affect the user experience of interacting with centralized exchanges?"}),"\n",(0,s.jsx)(o.p,{children:"When depositing ada to a centralized exchange (CEX), it is common for CEXes to wait for 15 to 30 confirmations. Since Peras brings faster transaction finality and significantly reduces the risk of rollback, there is a real possibility that CEXes could lower the number of confirmations it takes before the user can use their ada."}),"\n",(0,s.jsx)(o.h2,{id:"can-peras-help-reduce-network-congestion-during-peak-usage-periods",children:"Can Peras help reduce network congestion during peak usage periods?"}),"\n",(0,s.jsx)(o.p,{children:"No, Peras does not increase the number of transactions that can fit in a block. Ouroboros Leios will reduce congestion by increasing throughput."}),"\n",(0,s.jsx)(o.h2,{id:"will-peras-introduce-any-new-considerations-for-smart-contract-development-and-deployment-on-cardano",children:"Will Peras introduce any new considerations for smart contract development and deployment on Cardano?"}),"\n",(0,s.jsx)(o.p,{children:"Peras does not affect how smart contracts execute on Cardano, but faster settlement might enable new use cases for smart contracts."}),"\n",(0,s.jsx)(o.h2,{id:"how-often-do-we-expect-to-revert-back-to-praos",children:"How often do we expect to revert back to Praos?"}),"\n",(0,s.jsx)(o.p,{children:"Peras will only revert to Praos if a quorum of voting committee members do not cast votes for the same block in a given round. There are three situations where this could happen:"}),"\n",(0,s.jsxs)(o.ul,{children:["\n",(0,s.jsx)(o.li,{children:"members of the voting committee are offline or choose not to vote,"}),"\n",(0,s.jsx)(o.li,{children:"sufficient votes do not diffuse to the block-producing nodes, or"}),"\n",(0,s.jsx)(o.li,{children:"block-producing nodes disagree about which block is being voted for."}),"\n"]}),"\n",(0,s.jsx)(o.p,{children:"The Peras protocol parameters can be set to ensure that there is plenty of time for votes to diffuse to all  block-producing nodes, which addresses point 2 above. Other parameters ensure that the block being voted for is in the distant enough past that it is on the preferred chain of all block producers with high probability, which partially addresses point 3. Case #3 can also occur during an attack where adversarial block-producing nodes possess nearly a quarter of the stake or more. Case #1 could occur during a massive infrastructure disruption where many block-producing nodes are offline. Therefore, assuming the probability of global-scale network disruptions and large stake attacks is extremely low, well chosen protocol parameters will ensure cooldown periods are very unlikely to occur."}),"\n",(0,s.jsx)(o.h2,{id:"how-does-peras-achieve-fast-finality-on-top-of-nakamoto-consensus-that-is-known-to-have-slow-finality",children:"How does Peras achieve fast finality on top of Nakamoto consensus that is known to have slow finality?"}),"\n",(0,s.jsx)(o.p,{children:"Peras modifies the chain selection of the underlying Nakamoto approach by having a committee of the block-producing nodes add weight to blocks on their dominant chain at a fixed interval. This augments the sequential Nakamoto process, where block producers take turns minting blocks, with a parallel process where block producers collectively certify blocks. That additional attestation process speeds settlement up."}),"\n",(0,s.jsx)(o.h2,{id:"is-peras-a-layer-2",children:"Is Peras a layer 2?"}),"\n",(0,s.jsx)(o.p,{children:"No, Ouroboros Peras is a layer 1 protocol, just like Ouroboros Praos or Genesis. Peras\u2019 fast settlement may, however, benefit some layer 2 use cases."}),"\n",(0,s.jsx)(o.h2,{id:"which-other-cips-will-need-prs-when-peras-is-adopted",children:"Which other CIPs will need PRs when Peras is adopted?"}),"\n",(0,s.jsx)(o.p,{children:"The CIPs for protocol parameters and for the disaster recovery plan will need revision when Peras is adopted."}),"\n",(0,s.jsx)(o.h2,{id:"will-relay-nodes-need-to-track-boosted-blocks",children:"Will relay nodes need to track boosted blocks?"}),"\n",(0,s.jsx)(o.p,{children:"Yes, both block producers and relay nodes will need to track boosted blocks because they need to agree on the weight of the chain. If relay nodes did not include boosts in their chain selection, then they could experience periods of time when they were not following the weightiest chain."}),"\n",(0,s.jsx)(o.h2,{id:"what-is-the-lightest-way-for-clients-to-know-whether-a-block-has-a-peras-boost",children:"What is the lightest way for clients to know whether a block has a Peras boost?"}),"\n",(0,s.jsx)(o.p,{children:"Services such as BlockFrost likely will provide information on the number of Peras boosts that follow a given transaction."})]})}function d(e={}){const{wrapper:o}={...(0,a.R)(),...e.components};return o?(0,s.jsx)(o,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},8453:(e,o,t)=>{t.d(o,{R:()=>i,x:()=>n});var s=t(6540);const a={},r=s.createContext(a);function i(e){const o=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(o):{...o,...e}}),[o,e])}function n(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),s.createElement(r.Provider,{value:o},e.children)}}}]);